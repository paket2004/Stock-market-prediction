import{r as $,g as ta,b as R,c as ea}from"./@radix-C9DBgJhe.js";function ft(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=ft(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Hi={exports:{}},Oi={},Li={exports:{}},Vi={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe=$;function na(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ra=typeof Object.is=="function"?Object.is:na,ia=pe.useState,oa=pe.useEffect,sa=pe.useLayoutEffect,aa=pe.useDebugValue;function ca(t,e){var n=e(),r=ia({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return sa(function(){i.value=n,i.getSnapshot=e,Rn(i)&&o({inst:i})},[t,n,e]),oa(function(){return Rn(i)&&o({inst:i}),t(function(){Rn(i)&&o({inst:i})})},[t]),aa(n),n}function Rn(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ra(t,n)}catch{return!0}}function la(t,e){return e()}var ua=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?la:ca;Vi.useSyncExternalStore=pe.useSyncExternalStore!==void 0?pe.useSyncExternalStore:ua;Li.exports=Vi;var fa=Li.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=$,ha=fa;function da(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pa=typeof Object.is=="function"?Object.is:da,ga=ha.useSyncExternalStore,ma=Nn.useRef,ya=Nn.useEffect,va=Nn.useMemo,wa=Nn.useDebugValue;Oi.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=ma(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=va(function(){function c(p){if(!l){if(l=!0,u=p,p=r(p),i!==void 0&&s.hasValue){var x=s.value;if(i(x,p))return f=x}return f=p}if(x=f,pa(u,p))return x;var m=r(p);return i!==void 0&&i(x,m)?x:(u=p,f=m)}var l=!1,u,f,d=n===void 0?null:n;return[function(){return c(e())},d===null?void 0:function(){return c(d())}]},[e,n,r,i]);var a=ga(t,o[0],o[1]);return ya(function(){s.hasValue=!0,s.value=a},[a]),wa(a),a};Hi.exports=Oi;var xa=Hi.exports;const ba=ta(xa);var _a={VITE_FEATURE_OS_KEY:"4rE42v3X6L4k0UCiA-Ot7g",VITE_API_BASE_URL:"/api/v1",VITE_FRONTEND_VERSION:"v0.18.1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Vr=t=>{let e;const n=new Set,r=(u,f)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const p=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(x=>x(e,p))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(_a?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=e=t(r,i,c);return c},Sa=t=>t?Vr(t):Vr,{useDebugValue:Na}=R,{useSyncExternalStoreWithSelector:Ea}=ba,Aa=t=>t;function Yi(t,e=Aa,n){const r=Ea(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Na(r),r}const Yr=(t,e)=>{const n=Sa(t),r=(i,o=e)=>Yi(n,i,o);return Object.assign(r,n),r},Ma=(t,e)=>t?Yr(t,e):Yr;function it(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var ka={value:()=>{}};function En(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sn(n)}function sn(t){this._=t}function $a(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sn.prototype=En.prototype={constructor:sn,on:function(t,e){var n=this._,r=$a(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Ca(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Xr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Xr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new sn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Ca(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Xr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ka,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Qn="http://www.w3.org/1999/xhtml";const Gr={svg:"http://www.w3.org/2000/svg",xhtml:Qn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function An(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Gr.hasOwnProperty(e)?{space:Gr[e],local:t}:t}function Ia(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qn&&e.documentElement.namespaceURI===Qn?e.createElement(t):e.createElementNS(n,t)}}function Ta(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xi(t){var e=An(t);return(e.local?Ta:Ia)(e)}function Da(){}function mr(t){return t==null?Da:function(){return this.querySelector(t)}}function Pa(t){typeof t!="function"&&(t=mr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new at(r,this._parents)}function Fa(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ra(){return[]}function Gi(t){return t==null?Ra:function(){return this.querySelectorAll(t)}}function za(t){return function(){return Fa(t.apply(this,arguments))}}function Wa(t){typeof t=="function"?t=za(t):t=Gi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new at(r,i)}function qi(t){return function(){return this.matches(t)}}function Ui(t){return function(e){return e.matches(t)}}var Ba=Array.prototype.find;function Ha(t){return function(){return Ba.call(this.children,t)}}function Oa(){return this.firstElementChild}function La(t){return this.select(t==null?Oa:Ha(typeof t=="function"?t:Ui(t)))}var Va=Array.prototype.filter;function Ya(){return Array.from(this.children)}function Xa(t){return function(){return Va.call(this.children,t)}}function Ga(t){return this.selectAll(t==null?Ya:Xa(typeof t=="function"?t:Ui(t)))}function qa(t){typeof t!="function"&&(t=qi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new at(r,this._parents)}function Zi(t){return new Array(t.length)}function Ua(){return new at(this._enter||this._groups.map(Zi),this._parents)}function un(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}un.prototype={constructor:un,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Za(t){return function(){return t}}function Ka(t,e,n,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new un(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function Ja(t,e,n,r,i,o,s){var a,c,l=new Map,u=e.length,f=o.length,d=new Array(u),p;for(a=0;a<u;++a)(c=e[a])&&(d[a]=p=s.call(c,c.__data__,a,e)+"",l.has(p)?i[a]=c:l.set(p,c));for(a=0;a<f;++a)p=s.call(t,o[a],a,o)+"",(c=l.get(p))?(r[a]=c,c.__data__=o[a],l.delete(p)):n[a]=new un(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(d[a])===c&&(i[a]=c)}function Qa(t){return t.__data__}function ja(t,e){if(!arguments.length)return Array.from(this,Qa);var n=e?Ja:Ka,r=this._parents,i=this._groups;typeof t!="function"&&(t=Za(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],d=f.length,p=tc(t.call(u,u&&u.__data__,l,r)),x=p.length,m=a[l]=new Array(x),g=s[l]=new Array(x),h=c[l]=new Array(d);n(u,f,m,g,h,p,e);for(var v=0,b=0,w,_;v<x;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(_=g[b])&&++b<x;);w._next=_||null}}return s=new at(s,r),s._enter=a,s._exit=c,s}function tc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ec(){return new at(this._exit||this._groups.map(Zi),this._parents)}function nc(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function rc(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],f=l.length,d=a[c]=new Array(f),p,x=0;x<f;++x)(p=l[x]||u[x])&&(d[x]=p);for(;c<i;++c)a[c]=n[c];return new at(a,this._parents)}function ic(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function oc(t){t||(t=sc);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new at(i,this._parents).order()}function sc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ac(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function cc(){return Array.from(this)}function lc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function uc(){let t=0;for(const e of this)++t;return t}function fc(){return!this.node()}function hc(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function dc(t){return function(){this.removeAttribute(t)}}function pc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gc(t,e){return function(){this.setAttribute(t,e)}}function mc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function vc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function wc(t,e){var n=An(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?pc:dc:typeof e=="function"?n.local?vc:yc:n.local?mc:gc)(n,e))}function Ki(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xc(t){return function(){this.style.removeProperty(t)}}function bc(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _c(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Sc(t,e,n){return arguments.length>1?this.each((e==null?xc:typeof e=="function"?_c:bc)(t,e,n??"")):ge(this.node(),t)}function ge(t,e){return t.style.getPropertyValue(e)||Ki(t).getComputedStyle(t,null).getPropertyValue(e)}function Nc(t){return function(){delete this[t]}}function Ec(t,e){return function(){this[t]=e}}function Ac(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Mc(t,e){return arguments.length>1?this.each((e==null?Nc:typeof e=="function"?Ac:Ec)(t,e)):this.node()[t]}function Ji(t){return t.trim().split(/^|\s+/)}function yr(t){return t.classList||new Qi(t)}function Qi(t){this._node=t,this._names=Ji(t.getAttribute("class")||"")}Qi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ji(t,e){for(var n=yr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function to(t,e){for(var n=yr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function kc(t){return function(){ji(this,t)}}function $c(t){return function(){to(this,t)}}function Cc(t,e){return function(){(e.apply(this,arguments)?ji:to)(this,t)}}function Ic(t,e){var n=Ji(t+"");if(arguments.length<2){for(var r=yr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Cc:e?kc:$c)(n,e))}function Tc(){this.textContent=""}function Dc(t){return function(){this.textContent=t}}function Pc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Fc(t){return arguments.length?this.each(t==null?Tc:(typeof t=="function"?Pc:Dc)(t)):this.node().textContent}function Rc(){this.innerHTML=""}function zc(t){return function(){this.innerHTML=t}}function Wc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Bc(t){return arguments.length?this.each(t==null?Rc:(typeof t=="function"?Wc:zc)(t)):this.node().innerHTML}function Hc(){this.nextSibling&&this.parentNode.appendChild(this)}function Oc(){return this.each(Hc)}function Lc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vc(){return this.each(Lc)}function Yc(t){var e=typeof t=="function"?t:Xi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Xc(){return null}function Gc(t,e){var n=typeof t=="function"?t:Xi(t),r=e==null?Xc:typeof e=="function"?e:mr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function qc(){var t=this.parentNode;t&&t.removeChild(this)}function Uc(){return this.each(qc)}function Zc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Jc(t){return this.select(t?Kc:Zc)}function Qc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function jc(t){return function(e){t.call(this,e,this.__data__)}}function tl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function el(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function nl(t,e,n){return function(){var r=this.__on,i,o=jc(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function rl(t,e,n){var r=tl(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?nl:el,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function eo(t,e,n){var r=Ki(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function il(t,e){return function(){return eo(this,t,e)}}function ol(t,e){return function(){return eo(this,t,e.apply(this,arguments))}}function sl(t,e){return this.each((typeof e=="function"?ol:il)(t,e))}function*al(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var no=[null];function at(t,e){this._groups=t,this._parents=e}function He(){return new at([[document.documentElement]],no)}function cl(){return this}at.prototype=He.prototype={constructor:at,select:Pa,selectAll:Wa,selectChild:La,selectChildren:Ga,filter:qa,data:ja,enter:Ua,exit:ec,join:nc,merge:rc,selection:cl,order:ic,sort:oc,call:ac,nodes:cc,node:lc,size:uc,empty:fc,each:hc,attr:wc,style:Sc,property:Mc,classed:Ic,text:Fc,html:Bc,raise:Oc,lower:Vc,append:Yc,insert:Gc,remove:Uc,clone:Jc,datum:Qc,on:rl,dispatch:sl,[Symbol.iterator]:al};function mt(t){return typeof t=="string"?new at([[document.querySelector(t)]],[document.documentElement]):new at([[t]],no)}function ll(t){let e;for(;e=t.sourceEvent;)t=e;return t}function _t(t,e){if(t=ll(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ul={passive:!1},De={capture:!0,passive:!1};function zn(t){t.stopImmediatePropagation()}function le(t){t.preventDefault(),t.stopImmediatePropagation()}function ro(t){var e=t.document.documentElement,n=mt(t).on("dragstart.drag",le,De);"onselectstart"in e?n.on("selectstart.drag",le,De):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function io(t,e){var n=t.document.documentElement,r=mt(t).on("dragstart.drag",null);e&&(r.on("click.drag",le,De),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ye=t=>()=>t;function jn(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}jn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function fl(t){return!t.ctrlKey&&!t.button}function hl(){return this.parentNode}function dl(t,e){return e??{x:t.x,y:t.y}}function pl(){return navigator.maxTouchPoints||"ontouchstart"in this}function gl(){var t=fl,e=hl,n=dl,r=pl,i={},o=En("start","drag","end"),s=0,a,c,l,u,f=0;function d(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",g).on("touchmove.drag",h,ul).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,_){if(!(u||!t.call(this,w,_))){var E=b(this,e.call(this,w,_),w,_,"mouse");E&&(mt(w.view).on("mousemove.drag",x,De).on("mouseup.drag",m,De),ro(w.view),zn(w),l=!1,a=w.clientX,c=w.clientY,E("start",w))}}function x(w){if(le(w),!l){var _=w.clientX-a,E=w.clientY-c;l=_*_+E*E>f}i.mouse("drag",w)}function m(w){mt(w.view).on("mousemove.drag mouseup.drag",null),io(w.view,l),le(w),i.mouse("end",w)}function g(w,_){if(t.call(this,w,_)){var E=w.changedTouches,A=e.call(this,w,_),k=E.length,C,z;for(C=0;C<k;++C)(z=b(this,A,w,_,E[C].identifier,E[C]))&&(zn(w),z("start",w,E[C]))}}function h(w){var _=w.changedTouches,E=_.length,A,k;for(A=0;A<E;++A)(k=i[_[A].identifier])&&(le(w),k("drag",w,_[A]))}function v(w){var _=w.changedTouches,E=_.length,A,k;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),A=0;A<E;++A)(k=i[_[A].identifier])&&(zn(w),k("end",w,_[A]))}function b(w,_,E,A,k,C){var z=o.copy(),W=_t(C||E,_),H,F,y;if((y=n.call(w,new jn("beforestart",{sourceEvent:E,target:d,identifier:k,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:z}),A))!=null)return H=y.x-W[0]||0,F=y.y-W[1]||0,function M(N,D,P){var S=W,T;switch(N){case"start":i[k]=M,T=s++;break;case"end":delete i[k],--s;case"drag":W=_t(P||D,_),T=s;break}z.call(N,w,new jn(N,{sourceEvent:D,subject:y,target:d,identifier:k,active:T,x:W[0]+H,y:W[1]+F,dx:W[0]-S[0],dy:W[1]-S[1],dispatch:z}),A)}}return d.filter=function(w){return arguments.length?(t=typeof w=="function"?w:Ye(!!w),d):t},d.container=function(w){return arguments.length?(e=typeof w=="function"?w:Ye(w),d):e},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Ye(w),d):n},d.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Ye(!!w),d):r},d.on=function(){var w=o.on.apply(o,arguments);return w===o?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}function vr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function oo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Oe(){}var Pe=.7,fn=1/Pe,ue="\\s*([+-]?\\d+)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ml=/^#([0-9a-f]{3,8})$/,yl=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),vl=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),wl=new RegExp(`^rgba\\(${ue},${ue},${ue},${Fe}\\)$`),xl=new RegExp(`^rgba\\(${St},${St},${St},${Fe}\\)$`),bl=new RegExp(`^hsl\\(${Fe},${St},${St}\\)$`),_l=new RegExp(`^hsla\\(${Fe},${St},${St},${Fe}\\)$`),qr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vr(Oe,Re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ur,formatHex:Ur,formatHex8:Sl,formatHsl:Nl,formatRgb:Zr,toString:Zr});function Ur(){return this.rgb().formatHex()}function Sl(){return this.rgb().formatHex8()}function Nl(){return so(this).formatHsl()}function Zr(){return this.rgb().formatRgb()}function Re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ml.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Kr(e):n===3?new ot(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yl.exec(t))?new ot(e[1],e[2],e[3],1):(e=vl.exec(t))?new ot(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wl.exec(t))?Xe(e[1],e[2],e[3],e[4]):(e=xl.exec(t))?Xe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bl.exec(t))?jr(e[1],e[2]/100,e[3]/100,1):(e=_l.exec(t))?jr(e[1],e[2]/100,e[3]/100,e[4]):qr.hasOwnProperty(t)?Kr(qr[t]):t==="transparent"?new ot(NaN,NaN,NaN,0):null}function Kr(t){return new ot(t>>16&255,t>>8&255,t&255,1)}function Xe(t,e,n,r){return r<=0&&(t=e=n=NaN),new ot(t,e,n,r)}function El(t){return t instanceof Oe||(t=Re(t)),t?(t=t.rgb(),new ot(t.r,t.g,t.b,t.opacity)):new ot}function tr(t,e,n,r){return arguments.length===1?El(t):new ot(t,e,n,r??1)}function ot(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vr(ot,tr,oo(Oe,{brighter(t){return t=t==null?fn:Math.pow(fn,t),new ot(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pe:Math.pow(Pe,t),new ot(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ot(Zt(this.r),Zt(this.g),Zt(this.b),hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jr,formatHex:Jr,formatHex8:Al,formatRgb:Qr,toString:Qr}));function Jr(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}`}function Al(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}${qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qr(){const t=hn(this.opacity);return`${t===1?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${t===1?")":`, ${t})`}`}function hn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qt(t){return t=Zt(t),(t<16?"0":"")+t.toString(16)}function jr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new yt(t,e,n,r)}function so(t){if(t instanceof yt)return new yt(t.h,t.s,t.l,t.opacity);if(t instanceof Oe||(t=Re(t)),!t)return new yt;if(t instanceof yt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new yt(s,a,c,t.opacity)}function Ml(t,e,n,r){return arguments.length===1?so(t):new yt(t,e,n,r??1)}function yt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vr(yt,Ml,oo(Oe,{brighter(t){return t=t==null?fn:Math.pow(fn,t),new yt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pe:Math.pow(Pe,t),new yt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ot(Wn(t>=240?t-240:t+120,i,r),Wn(t,i,r),Wn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new yt(ti(this.h),Ge(this.s),Ge(this.l),hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=hn(this.opacity);return`${t===1?"hsl(":"hsla("}${ti(this.h)}, ${Ge(this.s)*100}%, ${Ge(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ti(t){return t=(t||0)%360,t<0?t+360:t}function Ge(t){return Math.max(0,Math.min(1,t||0))}function Wn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ao=t=>()=>t;function kl(t,e){return function(n){return t+n*e}}function $l(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Cl(t){return(t=+t)==1?co:function(e,n){return n-e?$l(e,n,t):ao(isNaN(e)?n:e)}}function co(t,e){var n=e-t;return n?kl(t,n):ao(isNaN(t)?e:t)}const ei=function t(e){var n=Cl(e);function r(i,o){var s=n((i=tr(i)).r,(o=tr(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=co(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function Dt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var er=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bn=new RegExp(er.source,"g");function Il(t){return function(){return t}}function Tl(t){return function(e){return t(e)+""}}function Dl(t,e){var n=er.lastIndex=Bn.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=er.exec(t))&&(i=Bn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Dt(r,i)})),n=Bn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Tl(c[0].x):Il(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}var ni=180/Math.PI,nr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lo(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ni,skewX:Math.atan(c)*ni,scaleX:s,scaleY:a}}var qe;function Pl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nr:lo(e.a,e.b,e.c,e.d,e.e,e.f)}function Fl(t){return t==null||(qe||(qe=document.createElementNS("http://www.w3.org/2000/svg","g")),qe.setAttribute("transform",t),!(t=qe.transform.baseVal.consolidate()))?nr:(t=t.matrix,lo(t.a,t.b,t.c,t.d,t.e,t.f))}function uo(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,d,p,x){if(l!==f||u!==d){var m=p.push("translate(",null,e,null,n);x.push({i:m-4,x:Dt(l,f)},{i:m-2,x:Dt(u,d)})}else(f||d)&&p.push("translate("+f+e+d+n)}function s(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Dt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Dt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,p,x){if(l!==f||u!==d){var m=p.push(i(p)+"scale(",null,",",null,")");x.push({i:m-4,x:Dt(l,f)},{i:m-2,x:Dt(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,d),s(l.rotate,u.rotate,f,d),a(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(p){for(var x=-1,m=d.length,g;++x<m;)f[(g=d[x]).i]=g.x(p);return f.join("")}}}var Rl=uo(Pl,"px, ","px)","deg)"),zl=uo(Fl,", ",")",")"),Wl=1e-12;function ri(t){return((t=Math.exp(t))+1/t)/2}function Bl(t){return((t=Math.exp(t))-1/t)/2}function Hl(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ol=function t(e,n,r){function i(o,s){var a=o[0],c=o[1],l=o[2],u=s[0],f=s[1],d=s[2],p=u-a,x=f-c,m=p*p+x*x,g,h;if(m<Wl)h=Math.log(d/l)/e,g=function(A){return[a+A*p,c+A*x,l*Math.exp(e*A*h)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),_=Math.log(Math.sqrt(b*b+1)-b),E=Math.log(Math.sqrt(w*w+1)-w);h=(E-_)/e,g=function(A){var k=A*h,C=ri(_),z=l/(n*v)*(C*Hl(e*k+_)-Bl(_));return[a+z*p,c+z*x,l*C/ri(e*k+_)]}}return g.duration=h*1e3*e/Math.SQRT2,g}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return t(s,a,c)},i}(Math.SQRT2,2,4);var me=0,Ie=0,Ae=0,fo=1e3,dn,Te,pn=0,Kt=0,Mn=0,ze=typeof performance=="object"&&performance.now?performance:Date,ho=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wr(){return Kt||(ho(Ll),Kt=ze.now()+Mn)}function Ll(){Kt=0}function gn(){this._call=this._time=this._next=null}gn.prototype=po.prototype={constructor:gn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?wr():+n)+(e==null?0:+e),!this._next&&Te!==this&&(Te?Te._next=this:dn=this,Te=this),this._call=t,this._time=n,rr()},stop:function(){this._call&&(this._call=null,this._time=1/0,rr())}};function po(t,e,n){var r=new gn;return r.restart(t,e,n),r}function Vl(){wr(),++me;for(var t=dn,e;t;)(e=Kt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--me}function ii(){Kt=(pn=ze.now())+Mn,me=Ie=0;try{Vl()}finally{me=0,Xl(),Kt=0}}function Yl(){var t=ze.now(),e=t-pn;e>fo&&(Mn-=e,pn=t)}function Xl(){for(var t,e=dn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:dn=n);Te=t,rr(r)}function rr(t){if(!me){Ie&&(Ie=clearTimeout(Ie));var e=t-Kt;e>24?(t<1/0&&(Ie=setTimeout(ii,t-ze.now()-Mn)),Ae&&(Ae=clearInterval(Ae))):(Ae||(pn=ze.now(),Ae=setInterval(Yl,fo)),me=1,ho(ii))}}function oi(t,e,n){var r=new gn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Gl=En("start","end","cancel","interrupt"),ql=[],go=0,si=1,ir=2,an=3,ai=4,or=5,cn=6;function kn(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ul(t,n,{name:e,index:r,group:i,on:Gl,tween:ql,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:go})}function xr(t,e){var n=vt(t,e);if(n.state>go)throw new Error("too late; already scheduled");return n}function Nt(t,e){var n=vt(t,e);if(n.state>an)throw new Error("too late; already running");return n}function vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ul(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=po(o,0,n.time);function o(l){n.state=si,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,f,d,p;if(n.state!==si)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===an)return oi(s);p.state===ai?(p.state=cn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=cn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(oi(function(){n.state===an&&(n.state=ai,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ir,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ir){for(n.state=an,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=or,1),f=-1,d=i.length;++f<d;)i[f].call(t,u);n.state===or&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=cn,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function ln(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>ir&&r.state<or,r.state=cn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function Zl(t){return this.each(function(){ln(this,t)})}function Kl(t,e){var n,r;return function(){var i=Nt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Jl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Nt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function Ql(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=vt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Kl:Jl)(n,t,e))}function br(t,e,n){var r=t._id;return t.each(function(){var i=Nt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return vt(i,r).value[e]}}function mo(t,e){var n;return(typeof e=="number"?Dt:e instanceof Re?ei:(n=Re(e))?(e=n,ei):Dl)(t,e)}function jl(t){return function(){this.removeAttribute(t)}}function tu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eu(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function nu(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function ru(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function iu(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function ou(t,e){var n=An(t),r=n==="transform"?zl:mo;return this.attrTween(t,typeof e=="function"?(n.local?iu:ru)(n,r,br(this,"attr."+t,e)):e==null?(n.local?tu:jl)(n):(n.local?nu:eu)(n,r,e))}function su(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function au(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&au(t,o)),n}return i._value=e,i}function lu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&su(t,o)),n}return i._value=e,i}function uu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=An(t);return this.tween(n,(r.local?cu:lu)(r,e))}function fu(t,e){return function(){xr(this,t).delay=+e.apply(this,arguments)}}function hu(t,e){return e=+e,function(){xr(this,t).delay=e}}function du(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fu:hu)(e,t)):vt(this.node(),e).delay}function pu(t,e){return function(){Nt(this,t).duration=+e.apply(this,arguments)}}function gu(t,e){return e=+e,function(){Nt(this,t).duration=e}}function mu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pu:gu)(e,t)):vt(this.node(),e).duration}function yu(t,e){if(typeof e!="function")throw new Error;return function(){Nt(this,t).ease=e}}function vu(t){var e=this._id;return arguments.length?this.each(yu(e,t)):vt(this.node(),e).ease}function wu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Nt(this,t).ease=n}}function xu(t){if(typeof t!="function")throw new Error;return this.each(wu(this._id,t))}function bu(t){typeof t!="function"&&(t=qi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new $t(r,this._parents,this._name,this._id)}function _u(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=n[a],u=c.length,f=s[a]=new Array(u),d,p=0;p<u;++p)(d=c[p]||l[p])&&(f[p]=d);for(;a<r;++a)s[a]=e[a];return new $t(s,this._parents,this._name,this._id)}function Su(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Nu(t,e,n){var r,i,o=Su(e)?xr:Nt;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Eu(t,e){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(t):this.each(Nu(n,t,e))}function Au(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Mu(){return this.on("end.remove",Au(this._id))}function ku(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mr(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,f,d=0;d<c;++d)(u=a[d])&&(f=t.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,kn(l[d],e,n,d,l,vt(u,n)));return new $t(o,this._parents,e,n)}function $u(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Gi(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=t.call(u,u.__data__,f,c),p,x=vt(u,n),m=0,g=d.length;m<g;++m)(p=d[m])&&kn(p,e,n,m,d,x);o.push(d),s.push(u)}return new $t(o,s,e,n)}var Cu=He.prototype.constructor;function Iu(){return new Cu(this._groups,this._parents)}function Tu(t,e){var n,r,i;return function(){var o=ge(this,t),s=(this.style.removeProperty(t),ge(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function yo(t){return function(){this.style.removeProperty(t)}}function Du(t,e,n){var r,i=n+"",o;return function(){var s=ge(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Pu(t,e,n){var r,i,o;return function(){var s=ge(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),ge(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function Fu(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=Nt(this,t),l=c.on,u=c.value[o]==null?a||(a=yo(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function Ru(t,e,n){var r=(t+="")=="transform"?Rl:mo;return e==null?this.styleTween(t,Tu(t,r)).on("end.style."+t,yo(t)):typeof e=="function"?this.styleTween(t,Pu(t,r,br(this,"style."+t,e))).each(Fu(this._id,t)):this.styleTween(t,Du(t,r,e),n).on("end.style."+t,null)}function zu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Wu(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&zu(t,s,n)),r}return o._value=e,o}function Bu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Wu(t,e,n??""))}function Hu(t){return function(){this.textContent=t}}function Ou(t){return function(){var e=t(this);this.textContent=e??""}}function Lu(t){return this.tween("text",typeof t=="function"?Ou(br(this,"text",t)):Hu(t==null?"":t+""))}function Vu(t){return function(e){this.textContent=t.call(this,e)}}function Yu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Vu(i)),e}return r._value=t,r}function Xu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Yu(t))}function Gu(){for(var t=this._name,e=this._id,n=vo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=vt(c,e);kn(c,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new $t(r,this._parents,t,n)}function qu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var l=Nt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var Uu=0;function $t(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function vo(){return++Uu}var Mt=He.prototype;$t.prototype={constructor:$t,select:ku,selectAll:$u,selectChild:Mt.selectChild,selectChildren:Mt.selectChildren,filter:bu,merge:_u,selection:Iu,transition:Gu,call:Mt.call,nodes:Mt.nodes,node:Mt.node,size:Mt.size,empty:Mt.empty,each:Mt.each,on:Eu,attr:ou,attrTween:uu,style:Ru,styleTween:Bu,text:Lu,textTween:Xu,remove:Mu,tween:Ql,delay:du,duration:mu,ease:vu,easeVarying:xu,end:qu,[Symbol.iterator]:Mt[Symbol.iterator]};function Zu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ku={time:null,delay:0,duration:250,ease:Zu};function Ju(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Qu(t){var e,n;t instanceof $t?(e=t._id,t=t._name):(e=vo(),(n=Ku).time=wr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&kn(c,t,e,l,s,n||Ju(c,e));return new $t(r,this._parents,t,e)}He.prototype.interrupt=Zl;He.prototype.transition=Qu;const Ue=t=>()=>t;function ju(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function kt(t,e,n){this.k=t,this.x=e,this.y=n}kt.prototype={constructor:kt,scale:function(t){return t===1?this:new kt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zt=new kt(1,0,0);kt.prototype;function Hn(t){t.stopImmediatePropagation()}function Me(t){t.preventDefault(),t.stopImmediatePropagation()}function tf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ef(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ci(){return this.__zoom||zt}function nf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function rf(){return navigator.maxTouchPoints||"ontouchstart"in this}function of(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function sf(){var t=tf,e=ef,n=of,r=nf,i=rf,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Ol,l=En("start","zoom","end"),u,f,d,p=500,x=150,m=0,g=10;function h(y){y.property("__zoom",ci).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",W).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(y,M,N,D){var P=y.selection?y.selection():y;P.property("__zoom",ci),y!==P?_(y,M,N,D):P.interrupt().each(function(){E(this,arguments).event(D).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},h.scaleBy=function(y,M,N,D){h.scaleTo(y,function(){var P=this.__zoom.k,S=typeof M=="function"?M.apply(this,arguments):M;return P*S},N,D)},h.scaleTo=function(y,M,N,D){h.transform(y,function(){var P=e.apply(this,arguments),S=this.__zoom,T=N==null?w(P):typeof N=="function"?N.apply(this,arguments):N,I=S.invert(T),B=typeof M=="function"?M.apply(this,arguments):M;return n(b(v(S,B),T,I),P,s)},N,D)},h.translateBy=function(y,M,N,D){h.transform(y,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof N=="function"?N.apply(this,arguments):N),e.apply(this,arguments),s)},null,D)},h.translateTo=function(y,M,N,D,P){h.transform(y,function(){var S=e.apply(this,arguments),T=this.__zoom,I=D==null?w(S):typeof D=="function"?D.apply(this,arguments):D;return n(zt.translate(I[0],I[1]).scale(T.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof N=="function"?-N.apply(this,arguments):-N),S,s)},D,P)};function v(y,M){return M=Math.max(o[0],Math.min(o[1],M)),M===y.k?y:new kt(M,y.x,y.y)}function b(y,M,N){var D=M[0]-N[0]*y.k,P=M[1]-N[1]*y.k;return D===y.x&&P===y.y?y:new kt(y.k,D,P)}function w(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function _(y,M,N,D){y.on("start.zoom",function(){E(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(D).end()}).tween("zoom",function(){var P=this,S=arguments,T=E(P,S).event(D),I=e.apply(P,S),B=N==null?w(I):typeof N=="function"?N.apply(P,S):N,L=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),O=P.__zoom,X=typeof M=="function"?M.apply(P,S):M,q=c(O.invert(B).concat(L/O.k),X.invert(B).concat(L/X.k));return function(U){if(U===1)U=X;else{var Z=q(U),tt=L/Z[2];U=new kt(tt,B[0]-Z[0]*tt,B[1]-Z[1]*tt)}T.zoom(null,U)}})}function E(y,M,N){return!N&&y.__zooming||new A(y,M)}function A(y,M){this.that=y,this.args=M,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,M),this.taps=0}A.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,M){return this.mouse&&y!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var M=mt(this.that).datum();l.call(y,this.that,new ju(y,{sourceEvent:this.sourceEvent,target:h,type:y,transform:this.that.__zoom,dispatch:l}),M)}};function k(y,...M){if(!t.apply(this,arguments))return;var N=E(this,M).event(y),D=this.__zoom,P=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,r.apply(this,arguments)))),S=_t(y);if(N.wheel)(N.mouse[0][0]!==S[0]||N.mouse[0][1]!==S[1])&&(N.mouse[1]=D.invert(N.mouse[0]=S)),clearTimeout(N.wheel);else{if(D.k===P)return;N.mouse=[S,D.invert(S)],ln(this),N.start()}Me(y),N.wheel=setTimeout(T,x),N.zoom("mouse",n(b(v(D,P),N.mouse[0],N.mouse[1]),N.extent,s));function T(){N.wheel=null,N.end()}}function C(y,...M){if(d||!t.apply(this,arguments))return;var N=y.currentTarget,D=E(this,M,!0).event(y),P=mt(y.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",L,!0),S=_t(y,N),T=y.clientX,I=y.clientY;ro(y.view),Hn(y),D.mouse=[S,this.__zoom.invert(S)],ln(this),D.start();function B(O){if(Me(O),!D.moved){var X=O.clientX-T,q=O.clientY-I;D.moved=X*X+q*q>m}D.event(O).zoom("mouse",n(b(D.that.__zoom,D.mouse[0]=_t(O,N),D.mouse[1]),D.extent,s))}function L(O){P.on("mousemove.zoom mouseup.zoom",null),io(O.view,D.moved),Me(O),D.event(O).end()}}function z(y,...M){if(t.apply(this,arguments)){var N=this.__zoom,D=_t(y.changedTouches?y.changedTouches[0]:y,this),P=N.invert(D),S=N.k*(y.shiftKey?.5:2),T=n(b(v(N,S),D,P),e.apply(this,M),s);Me(y),a>0?mt(this).transition().duration(a).call(_,T,D,y):mt(this).call(h.transform,T,D,y)}}function W(y,...M){if(t.apply(this,arguments)){var N=y.touches,D=N.length,P=E(this,M,y.changedTouches.length===D).event(y),S,T,I,B;for(Hn(y),T=0;T<D;++T)I=N[T],B=_t(I,this),B=[B,this.__zoom.invert(B),I.identifier],P.touch0?!P.touch1&&P.touch0[2]!==B[2]&&(P.touch1=B,P.taps=0):(P.touch0=B,S=!0,P.taps=1+!!u);u&&(u=clearTimeout(u)),S&&(P.taps<2&&(f=B[0],u=setTimeout(function(){u=null},p)),ln(this),P.start())}}function H(y,...M){if(this.__zooming){var N=E(this,M).event(y),D=y.changedTouches,P=D.length,S,T,I,B;for(Me(y),S=0;S<P;++S)T=D[S],I=_t(T,this),N.touch0&&N.touch0[2]===T.identifier?N.touch0[0]=I:N.touch1&&N.touch1[2]===T.identifier&&(N.touch1[0]=I);if(T=N.that.__zoom,N.touch1){var L=N.touch0[0],O=N.touch0[1],X=N.touch1[0],q=N.touch1[1],U=(U=X[0]-L[0])*U+(U=X[1]-L[1])*U,Z=(Z=q[0]-O[0])*Z+(Z=q[1]-O[1])*Z;T=v(T,Math.sqrt(U/Z)),I=[(L[0]+X[0])/2,(L[1]+X[1])/2],B=[(O[0]+q[0])/2,(O[1]+q[1])/2]}else if(N.touch0)I=N.touch0[0],B=N.touch0[1];else return;N.zoom("touch",n(b(T,I,B),N.extent,s))}}function F(y,...M){if(this.__zooming){var N=E(this,M).event(y),D=y.changedTouches,P=D.length,S,T;for(Hn(y),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),S=0;S<P;++S)T=D[S],N.touch0&&N.touch0[2]===T.identifier?delete N.touch0:N.touch1&&N.touch1[2]===T.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(T=_t(T,this),Math.hypot(f[0]-T[0],f[1]-T[1])<g)){var I=mt(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return h.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Ue(+y),h):r},h.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Ue(!!y),h):t},h.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Ue(!!y),h):i},h.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Ue([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),h):e},h.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],h):[o[0],o[1]]},h.translateExtent=function(y){return arguments.length?(s[0][0]=+y[0][0],s[1][0]=+y[1][0],s[0][1]=+y[0][1],s[1][1]=+y[1][1],h):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},h.constrain=function(y){return arguments.length?(n=y,h):n},h.duration=function(y){return arguments.length?(a=+y,h):a},h.interpolate=function(y){return arguments.length?(c=y,h):c},h.on=function(){var y=l.on.apply(l,arguments);return y===l?h:y},h.clickDistance=function(y){return arguments.length?(m=(y=+y)*y,h):Math.sqrt(m)},h.tapDistance=function(y){return arguments.length?(g=+y,h):g},h}const $n=$.createContext(null),af=$n.Provider,Ct={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},wo=Ct.error001();function j(t,e){const n=$.useContext($n);if(n===null)throw new Error(wo);return Yi(n,t,e)}const nt=()=>{const t=$.useContext($n);if(t===null)throw new Error(wo);return $.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},cf=t=>t.userSelectionActive?"none":"all";function lf({position:t,children:e,className:n,style:r,...i}){const o=j(cf),s=`${t}`.split("-");return R.createElement("div",{className:ft(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i},e)}function uf({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:R.createElement(lf,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},R.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const ff=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:l,...u})=>{const f=$.useRef(null),[d,p]=$.useState({x:0,y:0,width:0,height:0}),x=ft(["react-flow__edge-textwrapper",l]);return $.useEffect(()=>{if(f.current){const m=f.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:R.createElement("g",{transform:`translate(${t-d.width/2} ${e-d.height/2})`,className:x,visibility:d.width?"visible":"hidden",...u},i&&R.createElement("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),R.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:r},n),c)};var hf=$.memo(ff);const _r=t=>({width:t.offsetWidth,height:t.offsetHeight}),ye=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Sr=(t={x:0,y:0},e)=>({x:ye(t.x,e[0][0],e[1][0]),y:ye(t.y,e[0][1],e[1][1])}),li=(t,e,n)=>t<e?ye(Math.abs(t-e),1,50)/50:t>n?-ye(Math.abs(t-n),1,50)/50:0,xo=(t,e)=>{const n=li(t.x,35,e.width-35)*20,r=li(t.y,35,e.height-35)*20;return[n,r]},bo=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},df=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Nr=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),pf=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),ui=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),sr=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},gf=t=>ut(t.width)&&ut(t.height)&&ut(t.x)&&ut(t.y),ut=t=>!isNaN(t)&&isFinite(t),Q=Symbol.for("internals"),_o=["Enter"," ","Escape"],mf=(t,e)=>{},yf=t=>"nativeEvent"in t;function ar(t){var i,o;const e=yf(t)?t.nativeEvent:t,n=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const So=t=>"clientX"in t,Wt=(t,e)=>{var o,s;const n=So(t),r=n?t.clientX:(o=t.touches)==null?void 0:o[0].clientX,i=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},mn=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Le=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:d,interactionWidth:p=20})=>R.createElement(R.Fragment,null,R.createElement("path",{id:t,style:u,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:d}),p&&R.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),i&&ut(n)&&ut(r)?R.createElement(hf,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l}):null);Le.displayName="BaseEdge";function ke(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(o=>o.id===t);i&&n(r,{...i})}}function No({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,o=n<t?n+i:n-i,s=Math.abs(r-e)/2,a=r<e?r+s:r-s;return[o,a,i,s]}function Eo({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const c=t*.125+i*.375+s*.375+n*.125,l=e*.125+o*.375+a*.375+r*.125,u=Math.abs(c-t),f=Math.abs(l-e);return[c,l,u,f]}var Jt;(function(t){t.Strict="strict",t.Loose="loose"})(Jt||(Jt={}));var Ut;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ut||(Ut={}));var We;(function(t){t.Partial="partial",t.Full="full"})(We||(We={}));var Rt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Rt||(Rt={}));var yn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(yn||(yn={}));var V;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(V||(V={}));function fi({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===V.Left||t===V.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function Ao({sourceX:t,sourceY:e,sourcePosition:n=V.Bottom,targetX:r,targetY:i,targetPosition:o=V.Top}){const[s,a]=fi({pos:n,x1:t,y1:e,x2:r,y2:i}),[c,l]=fi({pos:o,x1:r,y1:i,x2:t,y2:e}),[u,f,d,p]=Eo({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:l});return[`M${t},${e} C${s},${a} ${c},${l} ${r},${i}`,u,f,d,p]}const Er=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=V.Bottom,targetPosition:o=V.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:m})=>{const[g,h,v]=Ao({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return R.createElement(Le,{path:g,labelX:h,labelY:v,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:m})});Er.displayName="SimpleBezierEdge";const hi={[V.Left]:{x:-1,y:0},[V.Right]:{x:1,y:0},[V.Top]:{x:0,y:-1},[V.Bottom]:{x:0,y:1}},vf=({source:t,sourcePosition:e=V.Bottom,target:n})=>e===V.Left||e===V.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},di=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function wf({source:t,sourcePosition:e=V.Bottom,target:n,targetPosition:r=V.Top,center:i,offset:o}){const s=hi[e],a=hi[r],c={x:t.x+s.x*o,y:t.y+s.y*o},l={x:n.x+a.x*o,y:n.y+a.y*o},u=vf({source:c,sourcePosition:e,target:l}),f=u.x!==0?"x":"y",d=u[f];let p=[],x,m;const g={x:0,y:0},h={x:0,y:0},[v,b,w,_]=No({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){x=i.x??v,m=i.y??b;const A=[{x,y:c.y},{x,y:l.y}],k=[{x:c.x,y:m},{x:l.x,y:m}];s[f]===d?p=f==="x"?A:k:p=f==="x"?k:A}else{const A=[{x:c.x,y:l.y}],k=[{x:l.x,y:c.y}];if(f==="x"?p=s.x===d?k:A:p=s.y===d?A:k,e===r){const F=Math.abs(t[f]-n[f]);if(F<=o){const y=Math.min(o-1,o-F);s[f]===d?g[f]=(c[f]>t[f]?-1:1)*y:h[f]=(l[f]>n[f]?-1:1)*y}}if(e!==r){const F=f==="x"?"y":"x",y=s[f]===a[F],M=c[F]>l[F],N=c[F]<l[F];(s[f]===1&&(!y&&M||y&&N)||s[f]!==1&&(!y&&N||y&&M))&&(p=f==="x"?A:k)}const C={x:c.x+g.x,y:c.y+g.y},z={x:l.x+h.x,y:l.y+h.y},W=Math.max(Math.abs(C.x-p[0].x),Math.abs(z.x-p[0].x)),H=Math.max(Math.abs(C.y-p[0].y),Math.abs(z.y-p[0].y));W>=H?(x=(C.x+z.x)/2,m=p[0].y):(x=p[0].x,m=(C.y+z.y)/2)}return[[t,{x:c.x+g.x,y:c.y+g.y},...p,{x:l.x+h.x,y:l.y+h.y},n],x,m,w,_]}function xf(t,e,n,r){const i=Math.min(di(t,e)/2,di(e,n)/2,r),{x:o,y:s}=e;if(t.x===o&&o===n.x||t.y===s&&s===n.y)return`L${o} ${s}`;if(t.y===s){const l=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${o+i*l},${s}Q ${o},${s} ${o},${s+i*u}`}const a=t.x<n.x?1:-1,c=t.y<n.y?-1:1;return`L ${o},${s+i*c}Q ${o},${s} ${o+i*a},${s}`}function cr({sourceX:t,sourceY:e,sourcePosition:n=V.Bottom,targetX:r,targetY:i,targetPosition:o=V.Top,borderRadius:s=5,centerX:a,centerY:c,offset:l=20}){const[u,f,d,p,x]=wf({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:c},offset:l});return[u.reduce((g,h,v)=>{let b="";return v>0&&v<u.length-1?b=xf(u[v-1],h,u[v+1],s):b=`${v===0?"M":"L"}${h.x} ${h.y}`,g+=b,g},""),f,d,p,x]}const Cn=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:f=V.Bottom,targetPosition:d=V.Top,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:g})=>{const[h,v,b]=cr({sourceX:t,sourceY:e,sourcePosition:f,targetX:n,targetY:r,targetPosition:d,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return R.createElement(Le,{path:h,labelX:v,labelY:b,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:p,markerStart:x,interactionWidth:g})});Cn.displayName="SmoothStepEdge";const Ar=$.memo(t=>{var e;return R.createElement(Cn,{...t,pathOptions:$.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Ar.displayName="StepEdge";function bf({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,o,s,a]=No({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,o,s,a]}const Mr=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:d,interactionWidth:p})=>{const[x,m,g]=bf({sourceX:t,sourceY:e,targetX:n,targetY:r});return R.createElement(Le,{path:x,labelX:m,labelY:g,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:d,interactionWidth:p})});Mr.displayName="StraightEdge";function Ze(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function pi({pos:t,x1:e,y1:n,x2:r,y2:i,c:o}){switch(t){case V.Left:return[e-Ze(e-r,o),n];case V.Right:return[e+Ze(r-e,o),n];case V.Top:return[e,n-Ze(n-i,o)];case V.Bottom:return[e,n+Ze(i-n,o)]}}function Mo({sourceX:t,sourceY:e,sourcePosition:n=V.Bottom,targetX:r,targetY:i,targetPosition:o=V.Top,curvature:s=.25}){const[a,c]=pi({pos:n,x1:t,y1:e,x2:r,y2:i,c:s}),[l,u]=pi({pos:o,x1:r,y1:i,x2:t,y2:e,c:s}),[f,d,p,x]=Eo({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${t},${e} C${a},${c} ${l},${u} ${r},${i}`,f,d,p,x]}const vn=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=V.Bottom,targetPosition:o=V.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:g})=>{const[h,v,b]=Mo({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:m==null?void 0:m.curvature});return R.createElement(Le,{path:h,labelX:v,labelY:b,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:g})});vn.displayName="BezierEdge";const kr=$.createContext(null),_f=kr.Provider;kr.Consumer;const Sf=()=>$.useContext(kr),Nf=t=>"id"in t&&"source"in t&&"target"in t,Ef=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,lr=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,Af=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Mf=(t,e)=>{if(!t.source||!t.target)return e;let n;return Nf(t)?n={...t}:n={...t,id:Ef(t)},Af(n,e)?e:e.concat(n)},ur=({x:t,y:e},[n,r,i],o,[s,a])=>{const c={x:(t-n)/i,y:(e-r)/i};return o?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},ko=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),fe=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},$r=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:o,y:s}=fe(i,e).positionAbsolute;return df(r,Nr({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return pf(n)},$o=(t,e,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const c={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},l=[];return t.forEach(u=>{const{width:f,height:d,selectable:p=!0,hidden:x=!1}=u;if(s&&!p||x)return!1;const{positionAbsolute:m}=fe(u,a),g={x:m.x,y:m.y,width:f||0,height:d||0},h=sr(c,g),v=typeof f>"u"||typeof d>"u"||f===null||d===null,b=o&&h>0,w=(f||0)*(d||0);(v||b||h>=w||u.dragging)&&l.push(u)}),l},Co=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Io=(t,e,n,r,i,o=.1)=>{const s=e/(t.width*(1+o)),a=n/(t.height*(1+o)),c=Math.min(s,a),l=ye(c,r,i),u=t.x+t.width/2,f=t.y+t.height/2,d=e/2-u*l,p=n/2-f*l;return{x:d,y:p,zoom:l}},Gt=(t,e=0)=>t.transition().duration(e);function gi(t,e,n,r){return(e[n]||[]).reduce((i,o)=>{var s,a;return`${t.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:t.id,x:(((s=t.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function kf(t,e,n,r,i,o){const{x:s,y:a}=Wt(t),l=e.elementsFromPoint(s,a).find(x=>x.classList.contains("react-flow__handle"));if(l){const x=l.getAttribute("data-nodeid");if(x){const m=Cr(void 0,l),g=l.getAttribute("data-handleid"),h=o({nodeId:x,id:g,type:m});if(h){const v=i.find(b=>b.nodeId===x&&b.type===m&&b.id===g);return{handle:{id:g,type:m,nodeId:x,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:h}}}}let u=[],f=1/0;if(i.forEach(x=>{const m=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(m<=r){const g=o(x);m<=f&&(m<f?u=[{handle:x,validHandleResult:g}]:m===f&&u.push({handle:x,validHandleResult:g}),f=m)}}),!u.length)return{handle:null,validHandleResult:To()};if(u.length===1)return u[0];const d=u.some(({validHandleResult:x})=>x.isValid),p=u.some(({handle:x})=>x.type==="target");return u.find(({handle:x,validHandleResult:m})=>p?x.type==="target":d?m.isValid:!0)||u[0]}const $f={source:null,target:null,sourceHandle:null,targetHandle:null},To=()=>({handleDomNode:null,isValid:!1,connection:$f,endHandle:null});function Do(t,e,n,r,i,o,s){const a=i==="target",c=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),l={...To(),handleDomNode:c};if(c){const u=Cr(void 0,c),f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),m={source:a?f:n,sourceHandle:a?d:r,target:a?n:f,targetHandle:a?r:d};l.connection=m,p&&x&&(e===Jt.Strict?a&&u==="source"||!a&&u==="target":f!==n||d!==r)&&(l.endHandle={nodeId:f,handleId:d,type:u},l.isValid=o(m))}return l}function Cf({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,o)=>{if(o[Q]){const{handleBounds:s}=o[Q];let a=[],c=[];s&&(a=gi(o,s,"source",`${e}-${n}-${r}`),c=gi(o,s,"target",`${e}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function Cr(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function On(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function If(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function Po({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:c,onEdgeUpdateEnd:l}){const u=bo(t.target),{connectionMode:f,domNode:d,autoPanOnConnect:p,connectionRadius:x,onConnectStart:m,panBy:g,getNodes:h,cancelConnection:v}=o();let b=0,w;const{x:_,y:E}=Wt(t),A=u==null?void 0:u.elementFromPoint(_,E),k=Cr(c,A),C=d==null?void 0:d.getBoundingClientRect();if(!C||!k)return;let z,W=Wt(t,C),H=!1,F=null,y=!1,M=null;const N=Cf({nodes:h(),nodeId:n,handleId:e,handleType:k}),D=()=>{if(!p)return;const[T,I]=xo(W,C);g({x:T,y:I}),b=requestAnimationFrame(D)};s({connectionPosition:W,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:k,connectionStartHandle:{nodeId:n,handleId:e,type:k},connectionEndHandle:null}),m==null||m(t,{nodeId:n,handleId:e,handleType:k});function P(T){const{transform:I}=o();W=Wt(T,C);const{handle:B,validHandleResult:L}=kf(T,u,ur(W,I,!1,[1,1]),x,N,O=>Do(O,f,n,e,i?"target":"source",a,u));if(w=B,H||(D(),H=!0),M=L.handleDomNode,F=L.connection,y=L.isValid,s({connectionPosition:w&&y?ko({x:w.x,y:w.y},I):W,connectionStatus:If(!!w,y),connectionEndHandle:L.endHandle}),!w&&!y&&!M)return On(z);F.source!==F.target&&M&&(On(z),z=M,M.classList.add("connecting","react-flow__handle-connecting"),M.classList.toggle("valid",y),M.classList.toggle("react-flow__handle-valid",y))}function S(T){var I,B;(w||M)&&F&&y&&(r==null||r(F)),(B=(I=o()).onConnectEnd)==null||B.call(I,T),c&&(l==null||l(T)),On(z),v(),cancelAnimationFrame(b),H=!1,y=!1,F=null,M=null,u.removeEventListener("mousemove",P),u.removeEventListener("mouseup",S),u.removeEventListener("touchmove",P),u.removeEventListener("touchend",S)}u.addEventListener("mousemove",P),u.addEventListener("mouseup",S),u.addEventListener("touchmove",P),u.addEventListener("touchend",S)}const mi=()=>!0,Tf=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Df=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n}},Fo=$.forwardRef(({type:t="source",position:e=V.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:c,className:l,onMouseDown:u,onTouchStart:f,...d},p)=>{var C,z;const x=s||null,m=t==="target",g=nt(),h=Sf(),{connectOnClick:v,noPanClassName:b}=j(Tf,it),{connecting:w,clickConnecting:_}=j(Df(h,x,t),it);h||(z=(C=g.getState()).onError)==null||z.call(C,"010",Ct.error010());const E=W=>{const{defaultEdgeOptions:H,onConnect:F,hasDefaultEdges:y}=g.getState(),M={...H,...W};if(y){const{edges:N,setEdges:D}=g.getState();D(Mf(M,N))}F==null||F(M),a==null||a(M)},A=W=>{if(!h)return;const H=So(W);i&&(H&&W.button===0||!H)&&Po({event:W,handleId:x,nodeId:h,onConnect:E,isTarget:m,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||mi}),H?u==null||u(W):f==null||f(W)},k=W=>{const{onClickConnectStart:H,onClickConnectEnd:F,connectionClickStartHandle:y,connectionMode:M,isValidConnection:N}=g.getState();if(!h||!y&&!i)return;if(!y){H==null||H(W,{nodeId:h,handleId:x,handleType:t}),g.setState({connectionClickStartHandle:{nodeId:h,type:t,handleId:x}});return}const D=bo(W.target),P=n||N||mi,{connection:S,isValid:T}=Do({nodeId:h,id:x,type:t},M,y.nodeId,y.handleId||null,y.type,P,D);T&&E(S),F==null||F(W),g.setState({connectionClickStartHandle:null})};return R.createElement("div",{"data-handleid":x,"data-nodeid":h,"data-handlepos":e,"data-id":`${h}-${x}-${t}`,className:ft(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",b,l,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:o,connecting:_,connectionindicator:r&&(i&&!w||o&&w)}]),onMouseDown:A,onTouchStart:A,onClick:v?k:void 0,ref:p,...d},c)});Fo.displayName="Handle";var wn=$.memo(Fo);const Ro=({data:t,isConnectable:e,targetPosition:n=V.Top,sourcePosition:r=V.Bottom})=>R.createElement(R.Fragment,null,R.createElement(wn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,R.createElement(wn,{type:"source",position:r,isConnectable:e}));Ro.displayName="DefaultNode";var fr=$.memo(Ro);const zo=({data:t,isConnectable:e,sourcePosition:n=V.Bottom})=>R.createElement(R.Fragment,null,t==null?void 0:t.label,R.createElement(wn,{type:"source",position:n,isConnectable:e}));zo.displayName="InputNode";var Wo=$.memo(zo);const Bo=({data:t,isConnectable:e,targetPosition:n=V.Top})=>R.createElement(R.Fragment,null,R.createElement(wn,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);Bo.displayName="OutputNode";var Ho=$.memo(Bo);const Ir=()=>null;Ir.displayName="GroupNode";const Pf=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Ke=t=>t.id;function Ff(t,e){return it(t.selectedNodes.map(Ke),e.selectedNodes.map(Ke))&&it(t.selectedEdges.map(Ke),e.selectedEdges.map(Ke))}const Oo=$.memo(({onSelectionChange:t})=>{const e=nt(),{selectedNodes:n,selectedEdges:r}=j(Pf,Ff);return $.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(o=>o(i))},[n,r,t]),null});Oo.displayName="SelectionListener";const Rf=t=>!!t.onSelectionChange;function zf({onSelectionChange:t}){const e=j(Rf);return t||e?R.createElement(Oo,{onSelectionChange:t}):null}const Wf=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function re(t,e){$.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function G(t,e,n){$.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const Bf=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:f,edgesFocusable:d,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:m,maxZoom:g,nodeExtent:h,onNodesChange:v,onEdgesChange:b,elementsSelectable:w,connectionMode:_,snapGrid:E,snapToGrid:A,translateExtent:k,connectOnClick:C,defaultEdgeOptions:z,fitView:W,fitViewOptions:H,onNodesDelete:F,onEdgesDelete:y,onNodeDrag:M,onNodeDragStart:N,onNodeDragStop:D,onSelectionDrag:P,onSelectionDragStart:S,onSelectionDragStop:T,noPanClassName:I,nodeOrigin:B,rfId:L,autoPanOnConnect:O,autoPanOnNodeDrag:X,onError:q,connectionRadius:U,isValidConnection:Z,nodeDragThreshold:tt})=>{const{setNodes:K,setEdges:dt,setDefaultNodesAndEdges:lt,setMinZoom:pt,setMaxZoom:wt,setTranslateExtent:et,setNodeExtent:xt,reset:J}=j(Wf,it),Y=nt();return $.useEffect(()=>{const st=r==null?void 0:r.map(Bt=>({...Bt,...z}));return lt(n,st),()=>{J()}},[]),G("defaultEdgeOptions",z,Y.setState),G("connectionMode",_,Y.setState),G("onConnect",i,Y.setState),G("onConnectStart",o,Y.setState),G("onConnectEnd",s,Y.setState),G("onClickConnectStart",a,Y.setState),G("onClickConnectEnd",c,Y.setState),G("nodesDraggable",l,Y.setState),G("nodesConnectable",u,Y.setState),G("nodesFocusable",f,Y.setState),G("edgesFocusable",d,Y.setState),G("edgesUpdatable",p,Y.setState),G("elementsSelectable",w,Y.setState),G("elevateNodesOnSelect",x,Y.setState),G("snapToGrid",A,Y.setState),G("snapGrid",E,Y.setState),G("onNodesChange",v,Y.setState),G("onEdgesChange",b,Y.setState),G("connectOnClick",C,Y.setState),G("fitViewOnInit",W,Y.setState),G("fitViewOnInitOptions",H,Y.setState),G("onNodesDelete",F,Y.setState),G("onEdgesDelete",y,Y.setState),G("onNodeDrag",M,Y.setState),G("onNodeDragStart",N,Y.setState),G("onNodeDragStop",D,Y.setState),G("onSelectionDrag",P,Y.setState),G("onSelectionDragStart",S,Y.setState),G("onSelectionDragStop",T,Y.setState),G("noPanClassName",I,Y.setState),G("nodeOrigin",B,Y.setState),G("rfId",L,Y.setState),G("autoPanOnConnect",O,Y.setState),G("autoPanOnNodeDrag",X,Y.setState),G("onError",q,Y.setState),G("connectionRadius",U,Y.setState),G("isValidConnection",Z,Y.setState),G("nodeDragThreshold",tt,Y.setState),re(t,K),re(e,dt),re(m,pt),re(g,wt),re(k,et),re(h,xt),null},yi={display:"none"},Hf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lo="react-flow__node-desc",Vo="react-flow__edge-desc",Of="react-flow__aria-live",Lf=t=>t.ariaLiveMessage;function Vf({rfId:t}){const e=j(Lf);return R.createElement("div",{id:`${Of}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Hf},e)}function Yf({rfId:t,disableKeyboardA11y:e}){return R.createElement(R.Fragment,null,R.createElement("div",{id:`${Lo}-${t}`,style:yi},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),R.createElement("div",{id:`${Vo}-${t}`,style:yi},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&R.createElement(Vf,{rfId:t}))}var Be=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=$.useState(!1),i=$.useRef(!1),o=$.useRef(new Set([])),[s,a]=$.useMemo(()=>{if(t!==null){const l=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=l.reduce((f,d)=>f.concat(...d),[]);return[l,u]}return[[],[]]},[t]);return $.useEffect(()=>{const c=typeof document<"u"?document:null,l=(e==null?void 0:e.target)||c;if(t!==null){const u=p=>{if(i.current=p.ctrlKey||p.metaKey||p.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&ar(p))return!1;const m=wi(p.code,a);o.current.add(p[m]),vi(s,o.current,!1)&&(p.preventDefault(),r(!0))},f=p=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&ar(p))return!1;const m=wi(p.code,a);vi(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(p[m]),p.key==="Meta"&&o.current.clear(),i.current=!1},d=()=>{o.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",f),window.addEventListener("blur",d),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",f),window.removeEventListener("blur",d)}}},[t,r]),n};function vi(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function wi(t,e){return e.includes(t)?"code":"key"}function Yo(t,e,n,r){var a,c;const i=t.parentNode||t.parentId;if(!i)return n;const o=e.get(i),s=fe(o,r);return Yo(o,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((a=o[Q])==null?void 0:a.z)??0)>(n.z??0)?((c=o[Q])==null?void 0:c.z)??0:n.z??0},r)}function Xo(t,e,n){t.forEach(r=>{var o;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:s,y:a,z:c}=Yo(r,t,{...r.position,z:((o=r[Q])==null?void 0:o.z)??0},e);r.positionAbsolute={x:s,y:a},r[Q].z=c,n!=null&&n[r.id]&&(r[Q].isParent=!0)}})}function Ln(t,e,n,r){const i=new Map,o={},s=r?1e3:0;return t.forEach(a=>{var p;const c=(ut(a.zIndex)?a.zIndex:0)+(a.selected?s:0),l=e.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(o[f]=!0);const d=(l==null?void 0:l.type)&&(l==null?void 0:l.type)!==a.type;Object.defineProperty(u,Q,{enumerable:!1,value:{handleBounds:d||(p=l==null?void 0:l[Q])==null?void 0:p.handleBounds,z:c}}),i.set(a.id,u)}),Xo(i,n,o),i}function Go(t,e={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:f}=t(),d=e.initial&&!l&&u;if(a&&c&&(d||!e.initial)){const x=n().filter(g=>{var v;const h=e.includeHiddenNodes?g.width&&g.height:!g.hidden;return(v=e.nodes)!=null&&v.length?h&&e.nodes.some(b=>b.id===g.id):h}),m=x.every(g=>g.width&&g.height);if(x.length>0&&m){const g=$r(x,f),{x:h,y:v,zoom:b}=Io(g,r,i,e.minZoom??o,e.maxZoom??s,e.padding??.1),w=zt.translate(h,v).scale(b);return typeof e.duration=="number"&&e.duration>0?a.transform(Gt(c,e.duration),w):a.transform(c,w),!0}}return!1}function Xf(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Q]:r[Q],selected:n.selected})}),new Map(e)}function Gf(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Je({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:l}=n();t!=null&&t.length&&(c&&r({nodeInternals:Xf(t,i)}),s==null||s(t)),e!=null&&e.length&&(l&&r({edges:Gf(e,o)}),a==null||a(e))}const ie=()=>{},qf={zoomIn:ie,zoomOut:ie,zoomTo:ie,getZoom:()=>1,setViewport:ie,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ie,fitBounds:ie,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Uf=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Zf=()=>{const t=nt(),{d3Zoom:e,d3Selection:n}=j(Uf,it);return $.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(Gt(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(Gt(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>e.scaleTo(Gt(n,o==null?void 0:o.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,o)=>{const[s,a,c]=t.getState().transform,l=zt.translate(i.x??s,i.y??a).scale(i.zoom??c);e.transform(Gt(n,o==null?void 0:o.duration),l)},getViewport:()=>{const[i,o,s]=t.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>Go(t.getState,i),setCenter:(i,o,s)=>{const{width:a,height:c,maxZoom:l}=t.getState(),u=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:l,f=a/2-i*u,d=c/2-o*u,p=zt.translate(f,d).scale(u);e.transform(Gt(n,s==null?void 0:s.duration),p)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:c,maxZoom:l}=t.getState(),{x:u,y:f,zoom:d}=Io(i,s,a,c,l,(o==null?void 0:o.padding)??.1),p=zt.translate(u,f).scale(d);e.transform(Gt(n,o==null?void 0:o.duration),p)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ur(i,o,s,a)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:s,snapGrid:a,domNode:c}=t.getState();if(!c)return i;const{x:l,y:u}=c.getBoundingClientRect(),f={x:i.x-l,y:i.y-u};return ur(f,o,s,a)},flowToScreenPosition:i=>{const{transform:o,domNode:s}=t.getState();if(!s)return i;const{x:a,y:c}=s.getBoundingClientRect(),l=ko(i,o);return{x:l.x+a,y:l.y+c}},viewportInitialized:!0}:qf,[e,n])};function qo(){const t=Zf(),e=nt(),n=$.useCallback(()=>e.getState().getNodes().map(m=>({...m})),[]),r=$.useCallback(m=>e.getState().nodeInternals.get(m),[]),i=$.useCallback(()=>{const{edges:m=[]}=e.getState();return m.map(g=>({...g}))},[]),o=$.useCallback(m=>{const{edges:g=[]}=e.getState();return g.find(h=>h.id===m)},[]),s=$.useCallback(m=>{const{getNodes:g,setNodes:h,hasDefaultNodes:v,onNodesChange:b}=e.getState(),w=g(),_=typeof m=="function"?m(w):m;if(v)h(_);else if(b){const E=_.length===0?w.map(A=>({type:"remove",id:A.id})):_.map(A=>({item:A,type:"reset"}));b(E)}},[]),a=$.useCallback(m=>{const{edges:g=[],setEdges:h,hasDefaultEdges:v,onEdgesChange:b}=e.getState(),w=typeof m=="function"?m(g):m;if(v)h(w);else if(b){const _=w.length===0?g.map(E=>({type:"remove",id:E.id})):w.map(E=>({item:E,type:"reset"}));b(_)}},[]),c=$.useCallback(m=>{const g=Array.isArray(m)?m:[m],{getNodes:h,setNodes:v,hasDefaultNodes:b,onNodesChange:w}=e.getState();if(b){const E=[...h(),...g];v(E)}else if(w){const _=g.map(E=>({item:E,type:"add"}));w(_)}},[]),l=$.useCallback(m=>{const g=Array.isArray(m)?m:[m],{edges:h=[],setEdges:v,hasDefaultEdges:b,onEdgesChange:w}=e.getState();if(b)v([...h,...g]);else if(w){const _=g.map(E=>({item:E,type:"add"}));w(_)}},[]),u=$.useCallback(()=>{const{getNodes:m,edges:g=[],transform:h}=e.getState(),[v,b,w]=h;return{nodes:m().map(_=>({..._})),edges:g.map(_=>({..._})),viewport:{x:v,y:b,zoom:w}}},[]),f=$.useCallback(({nodes:m,edges:g})=>{const{nodeInternals:h,getNodes:v,edges:b,hasDefaultNodes:w,hasDefaultEdges:_,onNodesDelete:E,onEdgesDelete:A,onNodesChange:k,onEdgesChange:C}=e.getState(),z=(m||[]).map(M=>M.id),W=(g||[]).map(M=>M.id),H=v().reduce((M,N)=>{const D=N.parentNode||N.parentId,P=!z.includes(N.id)&&D&&M.find(T=>T.id===D);return(typeof N.deletable=="boolean"?N.deletable:!0)&&(z.includes(N.id)||P)&&M.push(N),M},[]),F=b.filter(M=>typeof M.deletable=="boolean"?M.deletable:!0),y=F.filter(M=>W.includes(M.id));if(H||y){const M=Co(H,F),N=[...y,...M],D=N.reduce((P,S)=>(P.includes(S.id)||P.push(S.id),P),[]);if((_||w)&&(_&&e.setState({edges:b.filter(P=>!D.includes(P.id))}),w&&(H.forEach(P=>{h.delete(P.id)}),e.setState({nodeInternals:new Map(h)}))),D.length>0&&(A==null||A(N),C&&C(D.map(P=>({id:P,type:"remove"})))),H.length>0&&(E==null||E(H),k)){const P=H.map(S=>({id:S.id,type:"remove"}));k(P)}}},[]),d=$.useCallback(m=>{const g=gf(m),h=g?null:e.getState().nodeInternals.get(m.id);return!g&&!h?[null,null,g]:[g?m:ui(h),h,g]},[]),p=$.useCallback((m,g=!0,h)=>{const[v,b,w]=d(m);return v?(h||e.getState().getNodes()).filter(_=>{if(!w&&(_.id===b.id||!_.positionAbsolute))return!1;const E=ui(_),A=sr(E,v);return g&&A>0||A>=v.width*v.height}):[]},[]),x=$.useCallback((m,g,h=!0)=>{const[v]=d(m);if(!v)return!1;const b=sr(v,g);return h&&b>0||b>=v.width*v.height},[]);return $.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:c,addEdges:l,toObject:u,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:x}),[t,n,r,i,o,s,a,c,l,u,f,p,x])}const Kf={actInsideInputWithModifier:!1};var Jf=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=nt(),{deleteElements:r}=qo(),i=Be(t,Kf),o=Be(e);$.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),c=a().filter(u=>u.selected),l=s.filter(u=>u.selected);r({nodes:c,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),$.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function Qf(t){const e=nt();$.useEffect(()=>{let n;const r=()=>{var o,s;if(!t.current)return;const i=_r(t.current);(i.height===0||i.width===0)&&((s=(o=e.getState()).onError)==null||s.call(o,"004",Ct.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Tr={position:"absolute",width:"100%",height:"100%",top:0,left:0},jf=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Qe=t=>({x:t.x,y:t.y,zoom:t.k}),oe=(t,e)=>t.target.closest(`.${e}`),xi=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),bi=t=>{const e=t.ctrlKey&&mn()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},th=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),eh=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ut.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:d,translateExtent:p,minZoom:x,maxZoom:m,zoomActivationKeyCode:g,preventScrolling:h=!0,children:v,noWheelClassName:b,noPanClassName:w})=>{const _=$.useRef(),E=nt(),A=$.useRef(!1),k=$.useRef(!1),C=$.useRef(null),z=$.useRef({x:0,y:0,zoom:0}),{d3Zoom:W,d3Selection:H,d3ZoomHandler:F,userSelectionActive:y}=j(th,it),M=Be(g),N=$.useRef(0),D=$.useRef(!1),P=$.useRef();return Qf(C),$.useEffect(()=>{if(C.current){const S=C.current.getBoundingClientRect(),T=sf().scaleExtent([x,m]).translateExtent(p),I=mt(C.current).call(T),B=zt.translate(d.x,d.y).scale(ye(d.zoom,x,m)),L=[[0,0],[S.width,S.height]],O=T.constrain()(B,L,p);T.transform(I,O),T.wheelDelta(bi),E.setState({d3Zoom:T,d3Selection:I,d3ZoomHandler:I.on("wheel.zoom"),transform:[O.x,O.y,O.k],domNode:C.current.closest(".react-flow")})}},[]),$.useEffect(()=>{H&&W&&(s&&!M&&!y?H.on("wheel.zoom",S=>{if(oe(S,b))return!1;S.preventDefault(),S.stopImmediatePropagation();const T=H.property("__zoom").k||1;if(S.ctrlKey&&o){const Z=_t(S),tt=bi(S),K=T*Math.pow(2,tt);W.scaleTo(H,K,Z,S);return}const I=S.deltaMode===1?20:1;let B=c===Ut.Vertical?0:S.deltaX*I,L=c===Ut.Horizontal?0:S.deltaY*I;!mn()&&S.shiftKey&&c!==Ut.Vertical&&(B=S.deltaY*I,L=0),W.translateBy(H,-(B/T)*a,-(L/T)*a,{internal:!0});const O=Qe(H.property("__zoom")),{onViewportChangeStart:X,onViewportChange:q,onViewportChangeEnd:U}=E.getState();clearTimeout(P.current),D.current||(D.current=!0,e==null||e(S,O),X==null||X(O)),D.current&&(t==null||t(S,O),q==null||q(O),P.current=setTimeout(()=>{n==null||n(S,O),U==null||U(O),D.current=!1},150))},{passive:!1}):typeof F<"u"&&H.on("wheel.zoom",function(S,T){if(!h&&S.type==="wheel"&&!S.ctrlKey||oe(S,b))return null;S.preventDefault(),F.call(this,S,T)},{passive:!1}))},[y,s,c,H,W,F,M,o,h,b,e,t,n]),$.useEffect(()=>{W&&W.on("start",S=>{var B,L;if(!S.sourceEvent||S.sourceEvent.internal)return null;N.current=(B=S.sourceEvent)==null?void 0:B.button;const{onViewportChangeStart:T}=E.getState(),I=Qe(S.transform);A.current=!0,z.current=I,((L=S.sourceEvent)==null?void 0:L.type)==="mousedown"&&E.setState({paneDragging:!0}),T==null||T(I),e==null||e(S.sourceEvent,I)})},[W,e]),$.useEffect(()=>{W&&(y&&!A.current?W.on("zoom",null):y||W.on("zoom",S=>{var I;const{onViewportChange:T}=E.getState();if(E.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),k.current=!!(r&&xi(f,N.current??0)),(t||T)&&!((I=S.sourceEvent)!=null&&I.internal)){const B=Qe(S.transform);T==null||T(B),t==null||t(S.sourceEvent,B)}}))},[y,W,t,f,r]),$.useEffect(()=>{W&&W.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=E.getState();if(A.current=!1,E.setState({paneDragging:!1}),r&&xi(f,N.current??0)&&!k.current&&r(S.sourceEvent),k.current=!1,(n||T)&&jf(z.current,S.transform)){const I=Qe(S.transform);z.current=I,clearTimeout(_.current),_.current=setTimeout(()=>{T==null||T(I),n==null||n(S.sourceEvent,I)},s?150:0)}})},[W,s,f,n,r]),$.useEffect(()=>{W&&W.filter(S=>{const T=M||i,I=o&&S.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&S.button===1&&S.type==="mousedown"&&(oe(S,"react-flow__node")||oe(S,"react-flow__edge")))return!0;if(!f&&!T&&!s&&!l&&!o||y||!l&&S.type==="dblclick"||oe(S,b)&&S.type==="wheel"||oe(S,w)&&(S.type!=="wheel"||s&&S.type==="wheel"&&!M)||!o&&S.ctrlKey&&S.type==="wheel"||!T&&!s&&!I&&S.type==="wheel"||!f&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(f)&&!f.includes(S.button)&&S.type==="mousedown")return!1;const B=Array.isArray(f)&&f.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&B})},[y,W,i,o,s,l,f,u,M]),R.createElement("div",{className:"react-flow__renderer",ref:C,style:Tr},v)},nh=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function rh(){const{userSelectionActive:t,userSelectionRect:e}=j(nh,it);return t&&e?R.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function _i(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(i>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),o>0&&(r.style.height+=o),e.position.x<0){const s=Math.abs(e.position.x);r.position.x=r.position.x-s,r.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);r.position.y=r.position.y-s,r.style.height+=s,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Uo(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const o=t.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&_i(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&_i(r,s);break}case"remove":return r}return r.push(s),r},n)}function Zo(t,e){return Uo(t,e)}function ih(t,e){return Uo(t,e)}const Pt=(t,e)=>({id:t,type:"select",selected:e});function ce(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Pt(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Pt(r.id,!1))),n},[])}const Vn=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},oh=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Ko=$.memo(({isSelecting:t,selectionMode:e=We.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:f})=>{const d=$.useRef(null),p=nt(),x=$.useRef(0),m=$.useRef(0),g=$.useRef(),{userSelectionActive:h,elementsSelectable:v,dragging:b}=j(oh,it),w=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,m.current=0},_=F=>{o==null||o(F),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},E=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}s==null||s(F)},A=a?F=>a(F):void 0,k=F=>{const{resetSelectedElements:y,domNode:M}=p.getState();if(g.current=M==null?void 0:M.getBoundingClientRect(),!v||!t||F.button!==0||F.target!==d.current||!g.current)return;const{x:N,y:D}=Wt(F,g.current);y(),p.setState({userSelectionRect:{width:0,height:0,startX:N,startY:D,x:N,y:D}}),r==null||r(F)},C=F=>{const{userSelectionRect:y,nodeInternals:M,edges:N,transform:D,onNodesChange:P,onEdgesChange:S,nodeOrigin:T,getNodes:I}=p.getState();if(!t||!g.current||!y)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const B=Wt(F,g.current),L=y.startX??0,O=y.startY??0,X={...y,x:B.x<L?B.x:L,y:B.y<O?B.y:O,width:Math.abs(B.x-L),height:Math.abs(B.y-O)},q=I(),U=$o(M,X,D,e===We.Partial,!0,T),Z=Co(U,N).map(K=>K.id),tt=U.map(K=>K.id);if(x.current!==tt.length){x.current=tt.length;const K=ce(q,tt);K.length&&(P==null||P(K))}if(m.current!==Z.length){m.current=Z.length;const K=ce(N,Z);K.length&&(S==null||S(K))}p.setState({userSelectionRect:X})},z=F=>{if(F.button!==0)return;const{userSelectionRect:y}=p.getState();!h&&y&&F.target===d.current&&(_==null||_(F)),p.setState({nodesSelectionActive:x.current>0}),w(),i==null||i(F)},W=F=>{h&&(p.setState({nodesSelectionActive:x.current>0}),i==null||i(F)),w()},H=v&&(t||h);return R.createElement("div",{className:ft(["react-flow__pane",{dragging:b,selection:t}]),onClick:H?void 0:Vn(_,d),onContextMenu:Vn(E,d),onWheel:Vn(A,d),onMouseEnter:H?void 0:c,onMouseDown:H?k:void 0,onMouseMove:H?C:l,onMouseUp:H?z:void 0,onMouseLeave:H?W:u,ref:d,style:Tr},f,R.createElement(rh,null))});Ko.displayName="Pane";function Jo(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Jo(r,e):!1}function Si(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function sh(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Jo(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function ah(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Qo(t,e,n,r,i=[0,0],o){const s=ah(t,t.extent||r);let a=s;const c=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(c&&t.width&&t.height){const f=n.get(c),{x:d,y:p}=fe(f,i).positionAbsolute;a=f&&ut(d)&&ut(p)&&ut(f.width)&&ut(f.height)?[[d+t.width*i[0],p+t.height*i[1]],[d+f.width-t.width+t.width*i[0],p+f.height-t.height+t.height*i[1]]]:a}else o==null||o("005",Ct.error005()),a=s;else if(t.extent&&c&&t.extent!=="parent"){const f=n.get(c),{x:d,y:p}=fe(f,i).positionAbsolute;a=[[t.extent[0][0]+d,t.extent[0][1]+p],[t.extent[1][0]+d,t.extent[1][1]+p]]}let l={x:0,y:0};if(c){const f=n.get(c);l=fe(f,i).positionAbsolute}const u=a&&a!=="parent"?Sr(e,a):e;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function Yn({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const Ni=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const o=Array.from(i),s=e.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-s.left-a.x)/n,y:(l.top-s.top-a.y)/n,..._r(c)}})};function $e(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function hr({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:c}=e.getState(),l=a.get(t);if(!l){c==null||c("012",Ct.error012(t));return}e.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&s)&&(o({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):i([t])}function ch(){const t=nt();return $.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:o?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function Xn(t){return(e,n,r)=>t==null?void 0:t(e,r)}function jo({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=nt(),[c,l]=$.useState(!1),u=$.useRef([]),f=$.useRef({x:null,y:null}),d=$.useRef(0),p=$.useRef(null),x=$.useRef({x:0,y:0}),m=$.useRef(null),g=$.useRef(!1),h=$.useRef(!1),v=ch();return $.useEffect(()=>{if(t!=null&&t.current){const b=mt(t.current),w=({x:A,y:k})=>{const{nodeInternals:C,onNodeDrag:z,onSelectionDrag:W,updateNodePositions:H,nodeExtent:F,snapGrid:y,snapToGrid:M,nodeOrigin:N,onError:D}=a.getState();f.current={x:A,y:k};let P=!1,S={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&F){const I=$r(u.current,N);S=Nr(I)}if(u.current=u.current.map(I=>{const B={x:A-I.distance.x,y:k-I.distance.y};M&&(B.x=y[0]*Math.round(B.x/y[0]),B.y=y[1]*Math.round(B.y/y[1]));const L=[[F[0][0],F[0][1]],[F[1][0],F[1][1]]];u.current.length>1&&F&&!I.extent&&(L[0][0]=I.positionAbsolute.x-S.x+F[0][0],L[1][0]=I.positionAbsolute.x+(I.width??0)-S.x2+F[1][0],L[0][1]=I.positionAbsolute.y-S.y+F[0][1],L[1][1]=I.positionAbsolute.y+(I.height??0)-S.y2+F[1][1]);const O=Qo(I,B,C,L,N,D);return P=P||I.position.x!==O.position.x||I.position.y!==O.position.y,I.position=O.position,I.positionAbsolute=O.positionAbsolute,I}),!P)return;H(u.current,!0,!0),l(!0);const T=i?z:Xn(W);if(T&&m.current){const[I,B]=Yn({nodeId:i,dragItems:u.current,nodeInternals:C});T(m.current,I,B)}},_=()=>{if(!p.current)return;const[A,k]=xo(x.current,p.current);if(A!==0||k!==0){const{transform:C,panBy:z}=a.getState();f.current.x=(f.current.x??0)-A/C[2],f.current.y=(f.current.y??0)-k/C[2],z({x:A,y:k})&&w(f.current)}d.current=requestAnimationFrame(_)},E=A=>{var N;const{nodeInternals:k,multiSelectionActive:C,nodesDraggable:z,unselectNodesAndEdges:W,onNodeDragStart:H,onSelectionDragStart:F}=a.getState();h.current=!0;const y=i?H:Xn(F);(!s||!o)&&!C&&i&&((N=k.get(i))!=null&&N.selected||W()),i&&o&&s&&hr({id:i,store:a,nodeRef:t});const M=v(A);if(f.current=M,u.current=sh(k,z,M,i),y&&u.current){const[D,P]=Yn({nodeId:i,dragItems:u.current,nodeInternals:k});y(A.sourceEvent,D,P)}};if(e)b.on(".drag",null);else{const A=gl().on("start",k=>{const{domNode:C,nodeDragThreshold:z}=a.getState();z===0&&E(k);const W=v(k);f.current=W,p.current=(C==null?void 0:C.getBoundingClientRect())||null,x.current=Wt(k.sourceEvent,p.current)}).on("drag",k=>{var H,F;const C=v(k),{autoPanOnNodeDrag:z,nodeDragThreshold:W}=a.getState();if(!g.current&&h.current&&z&&(g.current=!0,_()),!h.current){const y=C.xSnapped-(((H=f==null?void 0:f.current)==null?void 0:H.x)??0),M=C.ySnapped-(((F=f==null?void 0:f.current)==null?void 0:F.y)??0);Math.sqrt(y*y+M*M)>W&&E(k)}(f.current.x!==C.xSnapped||f.current.y!==C.ySnapped)&&u.current&&h.current&&(m.current=k.sourceEvent,x.current=Wt(k.sourceEvent,p.current),w(C))}).on("end",k=>{if(h.current&&(l(!1),g.current=!1,h.current=!1,cancelAnimationFrame(d.current),u.current)){const{updateNodePositions:C,nodeInternals:z,onNodeDragStop:W,onSelectionDragStop:H}=a.getState(),F=i?W:Xn(H);if(C(u.current,!1,!1),F){const[y,M]=Yn({nodeId:i,dragItems:u.current,nodeInternals:z});F(k.sourceEvent,y,M)}}}).filter(k=>{const C=k.target;return!k.button&&(!n||!Si(C,`.${n}`,t))&&(!r||Si(C,r,t))});return b.call(A),()=>{b.on(".drag",null)}}}},[t,e,n,r,o,a,i,s,v]),c}function ts(){const t=nt();return $.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:c,onError:l,nodesDraggable:u}=t.getState(),f=s().filter(v=>v.selected&&(v.draggable||u&&typeof v.draggable>"u")),d=a?c[0]:5,p=a?c[1]:5,x=n.isShiftPressed?4:1,m=n.x*d*x,g=n.y*p*x,h=f.map(v=>{if(v.positionAbsolute){const b={x:v.positionAbsolute.x+m,y:v.positionAbsolute.y+g};a&&(b.x=c[0]*Math.round(b.x/c[0]),b.y=c[1]*Math.round(b.y/c[1]));const{positionAbsolute:w,position:_}=Qo(v,b,r,i,void 0,l);v.position=_,v.positionAbsolute=w}return v});o(h,!0,!1)},[])}const he={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ce=t=>{const e=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:f,onMouseMove:d,onMouseLeave:p,onContextMenu:x,onDoubleClick:m,style:g,className:h,isDraggable:v,isSelectable:b,isConnectable:w,isFocusable:_,selectNodesOnDrag:E,sourcePosition:A,targetPosition:k,hidden:C,resizeObserver:z,dragHandle:W,zIndex:H,isParent:F,noDragClassName:y,noPanClassName:M,initialized:N,disableKeyboardA11y:D,ariaLabel:P,rfId:S,hasHandleBounds:T})=>{const I=nt(),B=$.useRef(null),L=$.useRef(null),O=$.useRef(A),X=$.useRef(k),q=$.useRef(r),U=b||v||u||f||d||p,Z=ts(),tt=$e(n,I.getState,f),K=$e(n,I.getState,d),dt=$e(n,I.getState,p),lt=$e(n,I.getState,x),pt=$e(n,I.getState,m),wt=J=>{const{nodeDragThreshold:Y}=I.getState();if(b&&(!E||!v||Y>0)&&hr({id:n,store:I,nodeRef:B}),u){const st=I.getState().nodeInternals.get(n);st&&u(J,{...st})}},et=J=>{if(!ar(J)&&!D)if(_o.includes(J.key)&&b){const Y=J.key==="Escape";hr({id:n,store:I,unselect:Y,nodeRef:B})}else v&&l&&Object.prototype.hasOwnProperty.call(he,J.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),Z({x:he[J.key].x,y:he[J.key].y,isShiftPressed:J.shiftKey}))};$.useEffect(()=>()=>{L.current&&(z==null||z.unobserve(L.current),L.current=null)},[]),$.useEffect(()=>{if(B.current&&!C){const J=B.current;(!N||!T||L.current!==J)&&(L.current&&(z==null||z.unobserve(L.current)),z==null||z.observe(J),L.current=J)}},[C,N,T]),$.useEffect(()=>{const J=q.current!==r,Y=O.current!==A,st=X.current!==k;B.current&&(J||Y||st)&&(J&&(q.current=r),Y&&(O.current=A),st&&(X.current=k),I.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,r,A,k]);const xt=jo({nodeRef:B,disabled:C||!v,noDragClassName:y,handleSelector:W,nodeId:n,isSelectable:b,selectNodesOnDrag:E});return C?null:R.createElement("div",{className:ft(["react-flow__node",`react-flow__node-${r}`,{[M]:v},h,{selected:l,selectable:b,parent:F,dragging:xt}]),ref:B,style:{zIndex:H,transform:`translate(${a}px,${c}px)`,pointerEvents:U?"all":"none",visibility:N?"visible":"hidden",...g},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:tt,onMouseMove:K,onMouseLeave:dt,onContextMenu:lt,onClick:wt,onDoubleClick:pt,onKeyDown:_?et:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":D?void 0:`${Lo}-${S}`,"aria-label":P},R.createElement(_f,{value:n},R.createElement(t,{id:n,data:i,type:r,xPos:o,yPos:s,selected:l,isConnectable:w,sourcePosition:A,targetPosition:k,dragging:xt,dragHandle:W,zIndex:H})))};return e.displayName="NodeWrapper",$.memo(e)};const lh=t=>{const e=t.getNodes().filter(n=>n.selected);return{...$r(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function uh({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=nt(),{width:i,height:o,x:s,y:a,transformString:c,userSelectionActive:l}=j(lh,it),u=ts(),f=$.useRef(null);if($.useEffect(()=>{var x;n||(x=f.current)==null||x.focus({preventScroll:!0})},[n]),jo({nodeRef:f}),l||!i||!o)return null;const d=t?x=>{const m=r.getState().getNodes().filter(g=>g.selected);t(x,m)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(he,x.key)&&u({x:he[x.key].x,y:he[x.key].y,isShiftPressed:x.shiftKey})};return R.createElement("div",{className:ft(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c}},R.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:o,top:a,left:s}}))}var fh=$.memo(uh);const hh=t=>t.nodesSelectionActive,es=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:f,selectionOnDrag:d,selectionMode:p,onSelectionStart:x,onSelectionEnd:m,multiSelectionKeyCode:g,panActivationKeyCode:h,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:E,panOnScrollSpeed:A,panOnScrollMode:k,zoomOnDoubleClick:C,panOnDrag:z,defaultViewport:W,translateExtent:H,minZoom:F,maxZoom:y,preventScrolling:M,onSelectionContextMenu:N,noWheelClassName:D,noPanClassName:P,disableKeyboardA11y:S})=>{const T=j(hh),I=Be(f),B=Be(h),L=B||z,O=B||E,X=I||d&&L!==!0;return Jf({deleteKeyCode:a,multiSelectionKeyCode:g}),R.createElement(eh,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:o,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:O,panOnScrollSpeed:A,panOnScrollMode:k,zoomOnDoubleClick:C,panOnDrag:!I&&L,defaultViewport:W,translateExtent:H,minZoom:F,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:M,noWheelClassName:D,noPanClassName:P},R.createElement(Ko,{onSelectionStart:x,onSelectionEnd:m,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:L,isSelecting:!!X,selectionMode:p},t,T&&R.createElement(fh,{onSelectionContextMenu:N,noPanClassName:P,disableKeyboardA11y:S})))};es.displayName="FlowRenderer";var dh=$.memo(es);function ph(t){return j($.useCallback(n=>t?$o(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function gh(t){const e={input:Ce(t.input||Wo),default:Ce(t.default||fr),output:Ce(t.output||Ho),group:Ce(t.group||Ir)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=Ce(t[o]||fr),i),n);return{...e,...r}}const mh=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},yh=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),ns=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=j(yh,it),a=ph(t.onlyRenderVisibleElements),c=$.useRef(),l=$.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const d=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));o(d)});return c.current=u,u},[]);return $.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.disconnect()},[]),R.createElement("div",{className:"react-flow__nodes",style:Tr},a.map(u=>{var _,E,A;let f=u.type||"default";t.nodeTypes[f]||(s==null||s("003",Ct.error003(f)),f="default");const d=t.nodeTypes[f]||t.nodeTypes.default,p=!!(u.draggable||e&&typeof u.draggable>"u"),x=!!(u.selectable||i&&typeof u.selectable>"u"),m=!!(u.connectable||n&&typeof u.connectable>"u"),g=!!(u.focusable||r&&typeof u.focusable>"u"),h=t.nodeExtent?Sr(u.positionAbsolute,t.nodeExtent):u.positionAbsolute,v=(h==null?void 0:h.x)??0,b=(h==null?void 0:h.y)??0,w=mh({x:v,y:b,width:u.width??0,height:u.height??0,origin:t.nodeOrigin});return R.createElement(d,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||V.Bottom,targetPosition:u.targetPosition||V.Top,hidden:u.hidden,xPos:v,yPos:b,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!u.selected,isDraggable:p,isSelectable:x,isConnectable:m,isFocusable:g,resizeObserver:l,dragHandle:u.dragHandle,zIndex:((_=u[Q])==null?void 0:_.z)??0,isParent:!!((E=u[Q])!=null&&E.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!u.width&&!!u.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((A=u[Q])!=null&&A.handleBounds)})}))};ns.displayName="NodeRenderer";var vh=$.memo(ns);const wh=(t,e,n)=>n===V.Left?t-e:n===V.Right?t+e:t,xh=(t,e,n)=>n===V.Top?t-e:n===V.Bottom?t+e:t,Ei="react-flow__edgeupdater",Ai=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>R.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:ft([Ei,`${Ei}-${a}`]),cx:wh(e,r,t),cy:xh(n,r,t),r,stroke:"transparent",fill:"transparent"}),bh=()=>!0;var se=t=>{const e=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:c,animated:l,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,style:g,source:h,target:v,sourceX:b,sourceY:w,targetX:_,targetY:E,sourcePosition:A,targetPosition:k,elementsSelectable:C,hidden:z,sourceHandleId:W,targetHandleId:H,onContextMenu:F,onMouseEnter:y,onMouseMove:M,onMouseLeave:N,edgeUpdaterRadius:D,onEdgeUpdate:P,onEdgeUpdateStart:S,onEdgeUpdateEnd:T,markerEnd:I,markerStart:B,rfId:L,ariaLabel:O,isFocusable:X,isUpdatable:q,pathOptions:U,interactionWidth:Z,disableKeyboardA11y:tt})=>{const K=$.useRef(null),[dt,lt]=$.useState(!1),[pt,wt]=$.useState(!1),et=nt(),xt=$.useMemo(()=>`url('#${lr(B,L)}')`,[B,L]),J=$.useMemo(()=>`url('#${lr(I,L)}')`,[I,L]);if(z)return null;const Y=rt=>{var bt;const{edges:gt,addSelectedEdges:Lt,unselectNodesAndEdges:Vt,multiSelectionActive:Yt}=et.getState(),At=gt.find(Ne=>Ne.id===n);At&&(C&&(et.setState({nodesSelectionActive:!1}),At.selected&&Yt?(Vt({nodes:[],edges:[At]}),(bt=K.current)==null||bt.blur()):Lt([n])),s&&s(rt,At))},st=ke(n,et.getState,a),Bt=ke(n,et.getState,F),_e=ke(n,et.getState,y),Qt=ke(n,et.getState,M),jt=ke(n,et.getState,N),Et=(rt,gt)=>{if(rt.button!==0)return;const{edges:Lt,isValidConnection:Vt}=et.getState(),Yt=gt?v:h,At=(gt?H:W)||null,bt=gt?"target":"source",Ne=Vt||bh,Dn=gt,Ee=Lt.find(Xt=>Xt.id===n);wt(!0),S==null||S(rt,Ee,bt);const Pn=Xt=>{wt(!1),T==null||T(Xt,Ee,bt)};Po({event:rt,handleId:At,nodeId:Yt,onConnect:Xt=>P==null?void 0:P(Ee,Xt),isTarget:Dn,getState:et.getState,setState:et.setState,isValidConnection:Ne,edgeUpdaterType:bt,onEdgeUpdateEnd:Pn})},te=rt=>Et(rt,!0),Ht=rt=>Et(rt,!1),Ot=()=>lt(!0),ee=()=>lt(!1),ne=!C&&!s,Se=rt=>{var gt;if(!tt&&_o.includes(rt.key)&&C){const{unselectNodesAndEdges:Lt,addSelectedEdges:Vt,edges:Yt}=et.getState();rt.key==="Escape"?((gt=K.current)==null||gt.blur(),Lt({edges:[Yt.find(bt=>bt.id===n)]})):Vt([n])}};return R.createElement("g",{className:ft(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:l,inactive:ne,updating:dt}]),onClick:Y,onDoubleClick:st,onContextMenu:Bt,onMouseEnter:_e,onMouseMove:Qt,onMouseLeave:jt,onKeyDown:X?Se:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":O===null?void 0:O||`Edge from ${h} to ${v}`,"aria-describedby":X?`${Vo}-${L}`:void 0,ref:K},!pt&&R.createElement(t,{id:n,source:h,target:v,selected:c,animated:l,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,data:o,style:g,sourceX:b,sourceY:w,targetX:_,targetY:E,sourcePosition:A,targetPosition:k,sourceHandleId:W,targetHandleId:H,markerStart:xt,markerEnd:J,pathOptions:U,interactionWidth:Z}),q&&R.createElement(R.Fragment,null,(q==="source"||q===!0)&&R.createElement(Ai,{position:A,centerX:b,centerY:w,radius:D,onMouseDown:te,onMouseEnter:Ot,onMouseOut:ee,type:"source"}),(q==="target"||q===!0)&&R.createElement(Ai,{position:k,centerX:_,centerY:E,radius:D,onMouseDown:Ht,onMouseEnter:Ot,onMouseOut:ee,type:"target"})))};return e.displayName="EdgeWrapper",$.memo(e)};function _h(t){const e={default:se(t.default||vn),straight:se(t.bezier||Mr),step:se(t.step||Ar),smoothstep:se(t.step||Cn),simplebezier:se(t.simplebezier||Er)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=se(t[o]||vn),i),n);return{...e,...r}}function Mi(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,o=(n==null?void 0:n.width)||e.width,s=(n==null?void 0:n.height)||e.height;switch(t){case V.Top:return{x:r+o/2,y:i};case V.Right:return{x:r+o,y:i+s/2};case V.Bottom:return{x:r+o/2,y:i+s};case V.Left:return{x:r,y:i+s/2}}}function ki(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const Sh=(t,e,n,r,i,o)=>{const s=Mi(n,t,e),a=Mi(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Nh({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:c}){const l={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+o)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=Nr({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),f=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),d=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(f*d)>0}function $i(t){var r,i,o,s,a;const e=((r=t==null?void 0:t[Q])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const Eh=[{level:0,isMaxLevel:!0,edges:[]}];function Ah(t,e,n=!1){let r=-1;const i=t.reduce((s,a)=>{var u,f;const c=ut(a.zIndex);let l=c?a.zIndex:0;if(n){const d=e.get(a.target),p=e.get(a.source),x=a.selected||(d==null?void 0:d.selected)||(p==null?void 0:p.selected),m=Math.max(((u=p==null?void 0:p[Q])==null?void 0:u.z)||0,((f=d==null?void 0:d[Q])==null?void 0:f.z)||0,1e3);l=(c?a.zIndex:0)+(x?m:0)}return s[l]?s[l].push(a):s[l]=[a],r=l>r?l:r,s},{}),o=Object.entries(i).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===r}});return o.length===0?Eh:o}function Mh(t,e,n){const r=j($.useCallback(i=>t?i.edges.filter(o=>{const s=e.get(o.source),a=e.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Nh({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return Ah(r,e,n)}const kh=({color:t="none",strokeWidth:e=1})=>R.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),$h=({color:t="none",strokeWidth:e=1})=>R.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ci={[yn.Arrow]:kh,[yn.ArrowClosed]:$h};function Ch(t){const e=nt();return $.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(Ci,t)?Ci[t]:((o=(i=e.getState()).onError)==null||o.call(i,"009",Ct.error009(t)),null)},[t])}const Ih=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Ch(e);return c?R.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},R.createElement(c,{color:n,strokeWidth:s})):null},Th=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=lr(s,e);r.includes(a)||(i.push({id:a,color:s.color||t,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},rs=({defaultColor:t,rfId:e})=>{const n=j($.useCallback(Th({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return R.createElement("defs",null,n.map(r=>R.createElement(Ih,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};rs.displayName="MarkerDefinitions";var Dh=$.memo(rs);const Ph=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),is=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:p,onEdgeUpdateStart:x,onEdgeUpdateEnd:m,children:g,disableKeyboardA11y:h})=>{const{edgesFocusable:v,edgesUpdatable:b,elementsSelectable:w,width:_,height:E,connectionMode:A,nodeInternals:k,onError:C}=j(Ph,it),z=Mh(e,k,n);return _?R.createElement(R.Fragment,null,z.map(({level:W,edges:H,isMaxLevel:F})=>R.createElement("svg",{key:W,style:{zIndex:W},width:_,height:E,className:"react-flow__edges react-flow__container"},F&&R.createElement(Dh,{defaultColor:t,rfId:r}),R.createElement("g",null,H.map(y=>{const[M,N,D]=$i(k.get(y.source)),[P,S,T]=$i(k.get(y.target));if(!D||!T)return null;let I=y.type||"default";i[I]||(C==null||C("011",Ct.error011(I)),I="default");const B=i[I]||i.default,L=A===Jt.Strict?S.target:(S.target??[]).concat(S.source??[]),O=ki(N.source,y.sourceHandle),X=ki(L,y.targetHandle),q=(O==null?void 0:O.position)||V.Bottom,U=(X==null?void 0:X.position)||V.Top,Z=!!(y.focusable||v&&typeof y.focusable>"u"),tt=typeof s<"u"&&(y.updatable||b&&typeof y.updatable>"u");if(!O||!X)return C==null||C("008",Ct.error008(O,y)),null;const{sourceX:K,sourceY:dt,targetX:lt,targetY:pt}=Sh(M,O,q,P,X,U);return R.createElement(B,{key:y.id,id:y.id,className:ft([y.className,o]),type:I,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:K,sourceY:dt,targetX:lt,targetY:pt,sourcePosition:q,targetPosition:U,elementsSelectable:w,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:c,onMouseMove:l,onMouseLeave:u,onClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:p,onEdgeUpdateStart:x,onEdgeUpdateEnd:m,rfId:r,ariaLabel:y.ariaLabel,isFocusable:Z,isUpdatable:tt,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth,disableKeyboardA11y:h})})))),g):null};is.displayName="EdgeRenderer";var Fh=$.memo(is);const Rh=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function zh({children:t}){const e=j(Rh);return R.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function Wh(t){const e=qo(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Bh={[V.Left]:V.Right,[V.Right]:V.Left,[V.Top]:V.Bottom,[V.Bottom]:V.Top},os=({nodeId:t,handleType:e,style:n,type:r=Rt.Bezier,CustomComponent:i,connectionStatus:o})=>{var E,A,k;const{fromNode:s,handleId:a,toX:c,toY:l,connectionMode:u}=j($.useCallback(C=>({fromNode:C.nodeInternals.get(t),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[t]),it),f=(E=s==null?void 0:s[Q])==null?void 0:E.handleBounds;let d=f==null?void 0:f[e];if(u===Jt.Loose&&(d=d||(f==null?void 0:f[e==="source"?"target":"source"])),!s||!d)return null;const p=a?d.find(C=>C.id===a):d[0],x=p?p.x+p.width/2:(s.width??0)/2,m=p?p.y+p.height/2:s.height??0,g=(((A=s.positionAbsolute)==null?void 0:A.x)??0)+x,h=(((k=s.positionAbsolute)==null?void 0:k.y)??0)+m,v=p==null?void 0:p.position,b=v?Bh[v]:null;if(!v||!b)return null;if(i)return R.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:p,fromX:g,fromY:h,toX:c,toY:l,fromPosition:v,toPosition:b,connectionStatus:o});let w="";const _={sourceX:g,sourceY:h,sourcePosition:v,targetX:c,targetY:l,targetPosition:b};return r===Rt.Bezier?[w]=Mo(_):r===Rt.Step?[w]=cr({..._,borderRadius:0}):r===Rt.SmoothStep?[w]=cr(_):r===Rt.SimpleBezier?[w]=Ao(_):w=`M${g},${h} ${c},${l}`,R.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};os.displayName="ConnectionLine";const Hh=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Oh({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:c,connectionStatus:l}=j(Hh,it);return!(i&&o&&a&&s)?null:R.createElement("svg",{style:t,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},R.createElement("g",{className:ft(["react-flow__connection",l])},R.createElement(os,{nodeId:i,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:l})))}function Ii(t,e){return $.useRef(null),nt(),$.useMemo(()=>e(t),[t])}const ss=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:m,onSelectionEnd:g,connectionLineType:h,connectionLineStyle:v,connectionLineComponent:b,connectionLineContainerStyle:w,selectionKeyCode:_,selectionOnDrag:E,selectionMode:A,multiSelectionKeyCode:k,panActivationKeyCode:C,zoomActivationKeyCode:z,deleteKeyCode:W,onlyRenderVisibleElements:H,elementsSelectable:F,selectNodesOnDrag:y,defaultViewport:M,translateExtent:N,minZoom:D,maxZoom:P,preventScrolling:S,defaultMarkerColor:T,zoomOnScroll:I,zoomOnPinch:B,panOnScroll:L,panOnScrollSpeed:O,panOnScrollMode:X,zoomOnDoubleClick:q,panOnDrag:U,onPaneClick:Z,onPaneMouseEnter:tt,onPaneMouseMove:K,onPaneMouseLeave:dt,onPaneScroll:lt,onPaneContextMenu:pt,onEdgeUpdate:wt,onEdgeContextMenu:et,onEdgeMouseEnter:xt,onEdgeMouseMove:J,onEdgeMouseLeave:Y,edgeUpdaterRadius:st,onEdgeUpdateStart:Bt,onEdgeUpdateEnd:_e,noDragClassName:Qt,noWheelClassName:jt,noPanClassName:Et,elevateEdgesOnSelect:te,disableKeyboardA11y:Ht,nodeOrigin:Ot,nodeExtent:ee,rfId:ne})=>{const Se=Ii(t,gh),rt=Ii(e,_h);return Wh(o),R.createElement(dh,{onPaneClick:Z,onPaneMouseEnter:tt,onPaneMouseMove:K,onPaneMouseLeave:dt,onPaneContextMenu:pt,onPaneScroll:lt,deleteKeyCode:W,selectionKeyCode:_,selectionOnDrag:E,selectionMode:A,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:k,panActivationKeyCode:C,zoomActivationKeyCode:z,elementsSelectable:F,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:I,zoomOnPinch:B,zoomOnDoubleClick:q,panOnScroll:L,panOnScrollSpeed:O,panOnScrollMode:X,panOnDrag:U,defaultViewport:M,translateExtent:N,minZoom:D,maxZoom:P,onSelectionContextMenu:x,preventScrolling:S,noDragClassName:Qt,noWheelClassName:jt,noPanClassName:Et,disableKeyboardA11y:Ht},R.createElement(zh,null,R.createElement(Fh,{edgeTypes:rt,onEdgeClick:a,onEdgeDoubleClick:l,onEdgeUpdate:wt,onlyRenderVisibleElements:H,onEdgeContextMenu:et,onEdgeMouseEnter:xt,onEdgeMouseMove:J,onEdgeMouseLeave:Y,onEdgeUpdateStart:Bt,onEdgeUpdateEnd:_e,edgeUpdaterRadius:st,defaultMarkerColor:T,noPanClassName:Et,elevateEdgesOnSelect:!!te,disableKeyboardA11y:Ht,rfId:ne},R.createElement(Oh,{style:v,type:h,component:b,containerStyle:w})),R.createElement("div",{className:"react-flow__edgelabel-renderer"}),R.createElement(vh,{nodeTypes:Se,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:p,selectNodesOnDrag:y,onlyRenderVisibleElements:H,noPanClassName:Et,noDragClassName:Qt,disableKeyboardA11y:Ht,nodeOrigin:Ot,nodeExtent:ee,rfId:ne})))};ss.displayName="GraphView";var Lh=$.memo(ss);const dr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Tt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:dr,nodeExtent:dr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Jt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:mf,isValidConnection:void 0},Vh=()=>Ma((t,e)=>({...Tt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=e();t({nodeInternals:Ln(n,r,i,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?Ln(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:l}=e(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((m,g)=>{const h=i.get(g.id);if(h!=null&&h.hidden)i.set(h.id,{...h,[Q]:{...h[Q],handleBounds:void 0}});else if(h){const v=_r(g.nodeElement);!!(v.width&&v.height&&(h.width!==v.width||h.height!==v.height||g.forceUpdate))&&(i.set(h.id,{...h,[Q]:{...h[Q],handleBounds:{source:Ni(".source",g.nodeElement,d,l),target:Ni(".target",g.nodeElement,d,l)}},...v}),m.push({id:h.id,type:"dimensions",dimensions:v}))}return m},[]);Xo(i,l);const x=s||o&&!s&&Go(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=e(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:i};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=e();if(n!=null&&n.length){if(o){const l=Zo(n,a()),u=Ln(l,i,s,c);t({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=e();let s,a=null;r?s=n.map(c=>Pt(c,!0)):(s=ce(o(),n),a=ce(i,[])),Je({changedNodes:s,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=e();let s,a=null;r?s=n.map(c=>Pt(c,!0)):(s=ce(i,n),a=ce(o(),[])),Je({changedNodes:a,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=e(),s=n||o(),a=r||i,c=s.map(u=>(u.selected=!1,Pt(u.id,!1))),l=a.map(u=>Pt(u.id,!1));Je({changedNodes:c,changedEdges:l,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(a=>a.selected).map(a=>Pt(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Pt(a.id,!1));Je({changedNodes:o,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=Sr(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:c}=e();if(!s||!a||!n.x&&!n.y)return!1;const l=zt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[i,o]],f=s==null?void 0:s.constrain()(l,u,c);return s.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>t({connectionNodeId:Tt.connectionNodeId,connectionHandleId:Tt.connectionHandleId,connectionHandleType:Tt.connectionHandleType,connectionStatus:Tt.connectionStatus,connectionStartHandle:Tt.connectionStartHandle,connectionEndHandle:Tt.connectionEndHandle}),reset:()=>t({...Tt})}),Object.is),as=({children:t})=>{const e=$.useRef(null);return e.current||(e.current=Vh()),R.createElement(af,{value:e.current},t)};as.displayName="ReactFlowProvider";const cs=({children:t})=>$.useContext($n)?R.createElement(R.Fragment,null,t):R.createElement(as,null,t);cs.displayName="ReactFlowWrapper";const Yh={input:Wo,default:fr,output:Ho,group:Ir},Xh={default:vn,straight:Mr,step:Ar,smoothstep:Cn,simplebezier:Er},Gh=[0,0],qh=[15,15],Uh={x:0,y:0,zoom:1},Zh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Kh=$.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=Yh,edgeTypes:s=Xh,onNodeClick:a,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:h,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:E,onNodeDragStart:A,onNodeDrag:k,onNodeDragStop:C,onNodesDelete:z,onEdgesDelete:W,onSelectionChange:H,onSelectionDragStart:F,onSelectionDrag:y,onSelectionDragStop:M,onSelectionContextMenu:N,onSelectionStart:D,onSelectionEnd:P,connectionMode:S=Jt.Strict,connectionLineType:T=Rt.Bezier,connectionLineStyle:I,connectionLineComponent:B,connectionLineContainerStyle:L,deleteKeyCode:O="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:q=!1,selectionMode:U=We.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:tt=mn()?"Meta":"Control",zoomActivationKeyCode:K=mn()?"Meta":"Control",snapToGrid:dt=!1,snapGrid:lt=qh,onlyRenderVisibleElements:pt=!1,selectNodesOnDrag:wt=!0,nodesDraggable:et,nodesConnectable:xt,nodesFocusable:J,nodeOrigin:Y=Gh,edgesFocusable:st,edgesUpdatable:Bt,elementsSelectable:_e,defaultViewport:Qt=Uh,minZoom:jt=.5,maxZoom:Et=2,translateExtent:te=dr,preventScrolling:Ht=!0,nodeExtent:Ot,defaultMarkerColor:ee="#b1b1b7",zoomOnScroll:ne=!0,zoomOnPinch:Se=!0,panOnScroll:rt=!1,panOnScrollSpeed:gt=.5,panOnScrollMode:Lt=Ut.Free,zoomOnDoubleClick:Vt=!0,panOnDrag:Yt=!0,onPaneClick:At,onPaneMouseEnter:bt,onPaneMouseMove:Ne,onPaneMouseLeave:Dn,onPaneScroll:Ee,onPaneContextMenu:Pn,children:Br,onEdgeUpdate:Xt,onEdgeContextMenu:Es,onEdgeDoubleClick:As,onEdgeMouseEnter:Ms,onEdgeMouseMove:ks,onEdgeMouseLeave:$s,onEdgeUpdateStart:Cs,onEdgeUpdateEnd:Is,edgeUpdaterRadius:Ts=10,onNodesChange:Ds,onEdgesChange:Ps,noDragClassName:Fs="nodrag",noWheelClassName:Rs="nowheel",noPanClassName:Hr="nopan",fitView:zs=!1,fitViewOptions:Ws,connectOnClick:Bs=!0,attributionPosition:Hs,proOptions:Os,defaultEdgeOptions:Ls,elevateNodesOnSelect:Vs=!0,elevateEdgesOnSelect:Ys=!1,disableKeyboardA11y:Or=!1,autoPanOnConnect:Xs=!0,autoPanOnNodeDrag:Gs=!0,connectionRadius:qs=20,isValidConnection:Us,onError:Zs,style:Ks,id:Lr,nodeDragThreshold:Js,...Qs},js)=>{const Fn=Lr||"1";return R.createElement("div",{...Qs,style:{...Ks,...Zh},ref:js,className:ft(["react-flow",i]),"data-testid":"rf__wrapper",id:Lr},R.createElement(cs,null,R.createElement(Lh,{onInit:l,onMove:u,onMoveStart:f,onMoveEnd:d,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:s,connectionLineType:T,connectionLineStyle:I,connectionLineComponent:B,connectionLineContainerStyle:L,selectionKeyCode:X,selectionOnDrag:q,selectionMode:U,deleteKeyCode:O,multiSelectionKeyCode:tt,panActivationKeyCode:Z,zoomActivationKeyCode:K,onlyRenderVisibleElements:pt,selectNodesOnDrag:wt,defaultViewport:Qt,translateExtent:te,minZoom:jt,maxZoom:Et,preventScrolling:Ht,zoomOnScroll:ne,zoomOnPinch:Se,zoomOnDoubleClick:Vt,panOnScroll:rt,panOnScrollSpeed:gt,panOnScrollMode:Lt,panOnDrag:Yt,onPaneClick:At,onPaneMouseEnter:bt,onPaneMouseMove:Ne,onPaneMouseLeave:Dn,onPaneScroll:Ee,onPaneContextMenu:Pn,onSelectionContextMenu:N,onSelectionStart:D,onSelectionEnd:P,onEdgeUpdate:Xt,onEdgeContextMenu:Es,onEdgeDoubleClick:As,onEdgeMouseEnter:Ms,onEdgeMouseMove:ks,onEdgeMouseLeave:$s,onEdgeUpdateStart:Cs,onEdgeUpdateEnd:Is,edgeUpdaterRadius:Ts,defaultMarkerColor:ee,noDragClassName:Fs,noWheelClassName:Rs,noPanClassName:Hr,elevateEdgesOnSelect:Ys,rfId:Fn,disableKeyboardA11y:Or,nodeOrigin:Y,nodeExtent:Ot}),R.createElement(Bf,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:h,nodesDraggable:et,nodesConnectable:xt,nodesFocusable:J,edgesFocusable:st,edgesUpdatable:Bt,elementsSelectable:_e,elevateNodesOnSelect:Vs,minZoom:jt,maxZoom:Et,nodeExtent:Ot,onNodesChange:Ds,onEdgesChange:Ps,snapToGrid:dt,snapGrid:lt,connectionMode:S,translateExtent:te,connectOnClick:Bs,defaultEdgeOptions:Ls,fitView:zs,fitViewOptions:Ws,onNodesDelete:z,onEdgesDelete:W,onNodeDragStart:A,onNodeDrag:k,onNodeDragStop:C,onSelectionDrag:y,onSelectionDragStart:F,onSelectionDragStop:M,noPanClassName:Hr,nodeOrigin:Y,rfId:Fn,autoPanOnConnect:Xs,autoPanOnNodeDrag:Gs,onError:Zs,connectionRadius:qs,isValidConnection:Us,nodeDragThreshold:Js}),R.createElement(zf,{onSelectionChange:H}),Br,R.createElement(uf,{proOptions:Os,position:Hs}),R.createElement(Yf,{rfId:Fn,disableKeyboardA11y:Or})))});Kh.displayName="ReactFlow";const Jh=t=>t.getNodes();function Hd(){return j(Jh,it)}function ls(t){return e=>{const[n,r]=$.useState(e),i=$.useCallback(o=>r(s=>t(o,s)),[]);return[n,r,i]}}const Od=ls(Zo),Ld=ls(ih);var Dr={exports:{}};Dr.exports;(function(t){(function(){var e,n,r,i,o,s,a,c,l,u,f,d,p,x,m;r=Math.floor,u=Math.min,n=function(g,h){return g<h?-1:g>h?1:0},l=function(g,h,v,b,w){var _;if(v==null&&(v=0),w==null&&(w=n),v<0)throw new Error("lo must be non-negative");for(b==null&&(b=g.length);v<b;)_=r((v+b)/2),w(h,g[_])<0?b=_:v=_+1;return[].splice.apply(g,[v,v-v].concat(h)),h},s=function(g,h,v){return v==null&&(v=n),g.push(h),x(g,0,g.length-1,v)},o=function(g,h){var v,b;return h==null&&(h=n),v=g.pop(),g.length?(b=g[0],g[0]=v,m(g,0,h)):b=v,b},c=function(g,h,v){var b;return v==null&&(v=n),b=g[0],g[0]=h,m(g,0,v),b},a=function(g,h,v){var b;return v==null&&(v=n),g.length&&v(g[0],h)<0&&(b=[g[0],h],h=b[0],g[0]=b[1],m(g,0,v)),h},i=function(g,h){var v,b,w,_,E,A;for(h==null&&(h=n),_=(function(){A=[];for(var k=0,C=r(g.length/2);0<=C?k<C:k>C;0<=C?k++:k--)A.push(k);return A}).apply(this).reverse(),E=[],b=0,w=_.length;b<w;b++)v=_[b],E.push(m(g,v,h));return E},p=function(g,h,v){var b;if(v==null&&(v=n),b=g.indexOf(h),b!==-1)return x(g,0,b,v),m(g,b,v)},f=function(g,h,v){var b,w,_,E,A;if(v==null&&(v=n),w=g.slice(0,h),!w.length)return w;for(i(w,v),A=g.slice(h),_=0,E=A.length;_<E;_++)b=A[_],a(w,b,v);return w.sort(v).reverse()},d=function(g,h,v){var b,w,_,E,A,k,C,z,W;if(v==null&&(v=n),h*10<=g.length){if(_=g.slice(0,h).sort(v),!_.length)return _;for(w=_[_.length-1],C=g.slice(h),E=0,k=C.length;E<k;E++)b=C[E],v(b,w)<0&&(l(_,b,0,null,v),_.pop(),w=_[_.length-1]);return _}for(i(g,v),W=[],A=0,z=u(h,g.length);0<=z?A<z:A>z;0<=z?++A:--A)W.push(o(g,v));return W},x=function(g,h,v,b){var w,_,E;for(b==null&&(b=n),w=g[v];v>h;){if(E=v-1>>1,_=g[E],b(w,_)<0){g[v]=_,v=E;continue}break}return g[v]=w},m=function(g,h,v){var b,w,_,E,A;for(v==null&&(v=n),w=g.length,A=h,_=g[h],b=2*h+1;b<w;)E=b+1,E<w&&!(v(g[b],g[E])<0)&&(b=E),g[h]=g[b],h=b,b=2*h+1;return g[h]=_,x(g,A,h,v)},e=function(){g.push=s,g.pop=o,g.replace=c,g.pushpop=a,g.heapify=i,g.updateItem=p,g.nlargest=f,g.nsmallest=d;function g(h){this.cmp=h??n,this.nodes=[]}return g.prototype.push=function(h){return s(this.nodes,h,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(h){return this.nodes.indexOf(h)!==-1},g.prototype.replace=function(h){return c(this.nodes,h,this.cmp)},g.prototype.pushpop=function(h){return a(this.nodes,h,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(h){return p(this.nodes,h,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var h;return h=new g,h.nodes=this.nodes.slice(0),h},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),t!==null&&t.exports?t.exports=e:window.Heap=e}).call(ea)})(Dr);var Qh=Dr.exports,In=Qh;function jh(t,e,n){this.x=t,this.y=e,this.walkable=n===void 0?!0:n}var Pr=jh,td={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4},ht=td,us=Pr,je=ht;function It(t,e,n){var r;typeof t!="object"?r=t:(e=t.length,r=t[0].length,n=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,n)}It.prototype._buildNodes=function(t,e,n){var r,i,o=new Array(e);for(r=0;r<e;++r)for(o[r]=new Array(t),i=0;i<t;++i)o[r][i]=new us(i,r);if(n===void 0)return o;if(n.length!==e||n[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(i=0;i<t;++i)n[r][i]&&(o[r][i].walkable=!1);return o};It.prototype.getNodeAt=function(t,e){return this.nodes[e][t]};It.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable};It.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height};It.prototype.setWalkableAt=function(t,e,n){this.nodes[e][t].walkable=n};It.prototype.getNeighbors=function(t,e){var n=t.x,r=t.y,i=[],o=!1,s=!1,a=!1,c=!1,l=!1,u=!1,f=!1,d=!1,p=this.nodes;if(this.isWalkableAt(n,r-1)&&(i.push(p[r-1][n]),o=!0),this.isWalkableAt(n+1,r)&&(i.push(p[r][n+1]),a=!0),this.isWalkableAt(n,r+1)&&(i.push(p[r+1][n]),l=!0),this.isWalkableAt(n-1,r)&&(i.push(p[r][n-1]),f=!0),e===je.Never)return i;if(e===je.OnlyWhenNoObstacles)s=f&&o,c=o&&a,u=a&&l,d=l&&f;else if(e===je.IfAtMostOneObstacle)s=f||o,c=o||a,u=a||l,d=l||f;else if(e===je.Always)s=!0,c=!0,u=!0,d=!0;else throw new Error("Incorrect value of diagonalMovement");return s&&this.isWalkableAt(n-1,r-1)&&i.push(p[r-1][n-1]),c&&this.isWalkableAt(n+1,r-1)&&i.push(p[r-1][n+1]),u&&this.isWalkableAt(n+1,r+1)&&i.push(p[r+1][n+1]),d&&this.isWalkableAt(n-1,r+1)&&i.push(p[r+1][n-1]),i};It.prototype.clone=function(){var t,e,n=this.width,r=this.height,i=this.nodes,o=new It(n,r),s=new Array(r);for(t=0;t<r;++t)for(s[t]=new Array(n),e=0;e<n;++e)s[t][e]=new us(e,t,i[t][e].walkable);return o.nodes=s,o};var ed=It,ct={};function pr(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}ct.backtrace=pr;function nd(t,e){var n=pr(t),r=pr(e);return n.concat(r.reverse())}ct.biBacktrace=nd;function rd(t){var e,n=0,r,i,o,s;for(e=1;e<t.length;++e)r=t[e-1],i=t[e],o=r[0]-i[0],s=r[1]-i[1],n+=Math.sqrt(o*o+s*s);return n}ct.pathLength=rd;function Fr(t,e,n,r){var i=Math.abs,o=[],s,a,c,l,u,f;for(c=i(n-t),l=i(r-e),s=t<n?1:-1,a=e<r?1:-1,u=c-l;o.push([t,e]),!(t===n&&e===r);)f=2*u,f>-l&&(u=u-l,t=t+s),f<c&&(u=u+c,e=e+a);return o}ct.interpolate=Fr;function id(t){var e=[],n=t.length,r,i,o,s,a,c;if(n<2)return e;for(a=0;a<n-1;++a)for(r=t[a],i=t[a+1],o=Fr(r[0],r[1],i[0],i[1]),s=o.length,c=0;c<s-1;++c)e.push(o[c]);return e.push(t[n-1]),e}ct.expandPath=id;function od(t,e){var n=e.length,r=e[0][0],i=e[0][1],o=e[n-1][0],s=e[n-1][1],a,c,l,u,f,d,p,x,m,g,h;for(a=r,c=i,f=[[a,c]],d=2;d<n;++d){for(x=e[d],l=x[0],u=x[1],m=Fr(a,c,l,u),h=!1,p=1;p<m.length;++p)if(g=m[p],!t.isWalkableAt(g[0],g[1])){h=!0;break}h&&(lastValidCoord=e[d-1],f.push(lastValidCoord),a=lastValidCoord[0],c=lastValidCoord[1])}return f.push([o,s]),f}ct.smoothenPath=od;function sd(t){if(t.length<3)return t;var e=[],n=t[0][0],r=t[0][1],i=t[1][0],o=t[1][1],s=i-n,a=o-r,c,l,u,f,d,p;for(d=Math.sqrt(s*s+a*a),s/=d,a/=d,e.push([n,r]),p=2;p<t.length;p++)c=i,l=o,u=s,f=a,i=t[p][0],o=t[p][1],s=i-c,a=o-l,d=Math.sqrt(s*s+a*a),s/=d,a/=d,(s!==u||a!==f)&&e.push([c,l]);return e.push([i,o]),e}ct.compressPath=sd;var Ve={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}},ad=In,cd=ct,Gn=Ve,tn=ht;function fs(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||Gn.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=tn.OnlyWhenNoObstacles:this.diagonalMovement=tn.IfAtMostOneObstacle:this.diagonalMovement=tn.Never),this.diagonalMovement===tn.Never?this.heuristic=t.heuristic||Gn.manhattan:this.heuristic=t.heuristic||Gn.octile}fs.prototype.findPath=function(t,e,n,r,i){var o=new ad(function(_,E){return _.f-E.f}),s=i.getNodeAt(t,e),a=i.getNodeAt(n,r),c=this.heuristic,l=this.diagonalMovement,u=this.weight,f=Math.abs,d=Math.SQRT2,p,x,m,g,h,v,b,w;for(s.g=0,s.f=0,o.push(s),s.opened=!0;!o.empty();){if(p=o.pop(),p.closed=!0,p===a)return cd.backtrace(a);for(x=i.getNeighbors(p,l),g=0,h=x.length;g<h;++g)m=x[g],!m.closed&&(v=m.x,b=m.y,w=p.g+(v-p.x===0||b-p.y===0?1:d),(!m.opened||w<m.g)&&(m.g=w,m.h=m.h||u*c(f(v-n),f(b-r)),m.f=m.g+m.h,m.parent=p,m.opened?o.updateItem(m):(o.push(m),m.opened=!0)))}return[]};var Rr=fs,hs=Rr;function xn(t){hs.call(this,t);var e=this.heuristic;this.heuristic=function(n,r){return e(n,r)*1e6}}xn.prototype=new hs;xn.prototype.constructor=xn;var ld=xn,ud=ct,qn=ht;function ds(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=qn.OnlyWhenNoObstacles:this.diagonalMovement=qn.IfAtMostOneObstacle:this.diagonalMovement=qn.Never)}ds.prototype.findPath=function(t,e,n,r,i){var o=[],s=this.diagonalMovement,a=i.getNodeAt(t,e),c=i.getNodeAt(n,r),l,u,f,d,p;for(o.push(a),a.opened=!0;o.length;){if(f=o.shift(),f.closed=!0,f===c)return ud.backtrace(c);for(l=i.getNeighbors(f,s),d=0,p=l.length;d<p;++d)u=l[d],!(u.closed||u.opened)&&(o.push(u),u.opened=!0,u.parent=f)}return[]};var fd=ds,ps=Rr;function bn(t){ps.call(this,t),this.heuristic=function(e,n){return 0}}bn.prototype=new ps;bn.prototype.constructor=bn;var hd=bn,Ti=In,Di=ct,Un=Ve,en=ht;function gs(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||Un.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=en.OnlyWhenNoObstacles:this.diagonalMovement=en.IfAtMostOneObstacle:this.diagonalMovement=en.Never),this.diagonalMovement===en.Never?this.heuristic=t.heuristic||Un.manhattan:this.heuristic=t.heuristic||Un.octile}gs.prototype.findPath=function(t,e,n,r,i){var o=function(C,z){return C.f-z.f},s=new Ti(o),a=new Ti(o),c=i.getNodeAt(t,e),l=i.getNodeAt(n,r),u=this.heuristic,f=this.diagonalMovement,d=this.weight,p=Math.abs,x=Math.SQRT2,m,g,h,v,b,w,_,E,A=1,k=2;for(c.g=0,c.f=0,s.push(c),c.opened=A,l.g=0,l.f=0,a.push(l),l.opened=k;!s.empty()&&!a.empty();){for(m=s.pop(),m.closed=!0,g=i.getNeighbors(m,f),v=0,b=g.length;v<b;++v)if(h=g[v],!h.closed){if(h.opened===k)return Di.biBacktrace(m,h);w=h.x,_=h.y,E=m.g+(w-m.x===0||_-m.y===0?1:x),(!h.opened||E<h.g)&&(h.g=E,h.h=h.h||d*u(p(w-n),p(_-r)),h.f=h.g+h.h,h.parent=m,h.opened?s.updateItem(h):(s.push(h),h.opened=A))}for(m=a.pop(),m.closed=!0,g=i.getNeighbors(m,f),v=0,b=g.length;v<b;++v)if(h=g[v],!h.closed){if(h.opened===A)return Di.biBacktrace(h,m);w=h.x,_=h.y,E=m.g+(w-m.x===0||_-m.y===0?1:x),(!h.opened||E<h.g)&&(h.g=E,h.h=h.h||d*u(p(w-t),p(_-e)),h.f=h.g+h.h,h.parent=m,h.opened?a.updateItem(h):(a.push(h),h.opened=k))}}return[]};var zr=gs,ms=zr;function _n(t){ms.call(this,t);var e=this.heuristic;this.heuristic=function(n,r){return e(n,r)*1e6}}_n.prototype=new ms;_n.prototype.constructor=_n;var dd=_n,Pi=ct,Zn=ht;function ys(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=Zn.OnlyWhenNoObstacles:this.diagonalMovement=Zn.IfAtMostOneObstacle:this.diagonalMovement=Zn.Never)}ys.prototype.findPath=function(t,e,n,r,i){var o=i.getNodeAt(t,e),s=i.getNodeAt(n,r),a=[],c=[],l,u,f,d=this.diagonalMovement,p=0,x=1,m,g;for(a.push(o),o.opened=!0,o.by=p,c.push(s),s.opened=!0,s.by=x;a.length&&c.length;){for(f=a.shift(),f.closed=!0,l=i.getNeighbors(f,d),m=0,g=l.length;m<g;++m)if(u=l[m],!u.closed){if(u.opened){if(u.by===x)return Pi.biBacktrace(f,u);continue}a.push(u),u.parent=f,u.opened=!0,u.by=p}for(f=c.shift(),f.closed=!0,l=i.getNeighbors(f,d),m=0,g=l.length;m<g;++m)if(u=l[m],!u.closed){if(u.opened){if(u.by===p)return Pi.biBacktrace(u,f);continue}c.push(u),u.parent=f,u.opened=!0,u.by=x}}return[]};var pd=ys,vs=zr;function Sn(t){vs.call(this,t),this.heuristic=function(e,n){return 0}}Sn.prototype=new vs;Sn.prototype.constructor=Sn;var gd=Sn,Kn=Ve,Fi=Pr,nn=ht;function ws(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||Kn.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=nn.OnlyWhenNoObstacles:this.diagonalMovement=nn.IfAtMostOneObstacle:this.diagonalMovement=nn.Never),this.diagonalMovement===nn.Never?this.heuristic=t.heuristic||Kn.manhattan:this.heuristic=t.heuristic||Kn.octile}ws.prototype.findPath=function(t,e,n,r,i){var o=new Date().getTime(),s=(function(m,g){return this.heuristic(Math.abs(g.x-m.x),Math.abs(g.y-m.y))}).bind(this),a=function(m,g){return m.x===g.x||m.y===g.y?1:Math.SQRT2},c=(function(m,g,h,v,b){if(this.timeLimit>0&&new Date().getTime()-o>this.timeLimit*1e3)return 1/0;var w=g+s(m,u)*this.weight;if(w>h)return w;if(m==u)return v[b]=[m.x,m.y],m;var _,E,A,k,C=i.getNeighbors(m,this.diagonalMovement);for(A=0,_=1/0;k=C[A];++A){if(this.trackRecursion&&(k.retainCount=k.retainCount+1||1,k.tested!==!0&&(k.tested=!0)),E=c(k,g+a(m,k),h,v,b+1),E instanceof Fi)return v[b]=[m.x,m.y],E;this.trackRecursion&&--k.retainCount===0&&(k.tested=!1),E<_&&(_=E)}return _}).bind(this),l=i.getNodeAt(t,e),u=i.getNodeAt(n,r),f=s(l,u),d,p,x;for(d=0;;++d){if(p=[],x=c(l,0,f,p,0),x===1/0)return[];if(x instanceof Fi)return p;f=x}return[]};var md=ws,yd=In,Ri=ct,xs=Ve;function Wr(t){t=t||{},this.heuristic=t.heuristic||xs.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}Wr.prototype.findPath=function(t,e,n,r,i){var o=this.openList=new yd(function(l,u){return l.f-u.f}),s=this.startNode=i.getNodeAt(t,e),a=this.endNode=i.getNodeAt(n,r),c;for(this.grid=i,s.g=0,s.f=0,o.push(s),s.opened=!0;!o.empty();){if(c=o.pop(),c.closed=!0,c===a)return Ri.expandPath(Ri.backtrace(a));this._identifySuccessors(c)}return[]};Wr.prototype._identifySuccessors=function(t){var e=this.grid,n=this.heuristic,r=this.openList,i=this.endNode.x,o=this.endNode.y,s,a,c,l,u,f=t.x,d=t.y,p,x,m,g,h,v=Math.abs;for(s=this._findNeighbors(t),l=0,u=s.length;l<u;++l)if(a=s[l],c=this._jump(a[0],a[1],f,d),c){if(p=c[0],x=c[1],h=e.getNodeAt(p,x),h.closed)continue;m=xs.octile(v(p-f),v(x-d)),g=t.g+m,(!h.opened||g<h.g)&&(h.g=g,h.h=h.h||n(v(p-i),v(x-o)),h.f=h.g+h.h,h.parent=t,h.opened?r.updateItem(h):(r.push(h),h.opened=!0))}};var Tn=Wr,bs=Tn,vd=ht;function ve(t){bs.call(this,t)}ve.prototype=new bs;ve.prototype.constructor=ve;ve.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,s=e-r;if(!i.isWalkableAt(t,e))return null;if(this.trackJumpRecursion===!0&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(o!==0){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else if(s!==0){if(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-s)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-s))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}else throw new Error("Only horizontal and vertical movements are allowed");return this._jump(t+o,e+s,t,e)};ve.prototype._findNeighbors=function(t){var e=t.parent,n=t.x,r=t.y,i=this.grid,o,s,a,c,l=[],u,f,d,p;if(e)o=e.x,s=e.y,a=(n-o)/Math.max(Math.abs(n-o),1),c=(r-s)/Math.max(Math.abs(r-s),1),a!==0?(i.isWalkableAt(n,r-1)&&l.push([n,r-1]),i.isWalkableAt(n,r+1)&&l.push([n,r+1]),i.isWalkableAt(n+a,r)&&l.push([n+a,r])):c!==0&&(i.isWalkableAt(n-1,r)&&l.push([n-1,r]),i.isWalkableAt(n+1,r)&&l.push([n+1,r]),i.isWalkableAt(n,r+c)&&l.push([n,r+c]));else for(u=i.getNeighbors(t,vd.Never),d=0,p=u.length;d<p;++d)f=u[d],l.push([f.x,f.y]);return l};var wd=ve,_s=Tn,xd=ht;function we(t){_s.call(this,t)}we.prototype=new _s;we.prototype.constructor=we;we.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,s=e-r;if(!i.isWalkableAt(t,e))return null;if(this.trackJumpRecursion===!0&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(o!==0&&s!==0){if(i.isWalkableAt(t-o,e+s)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-s)&&!i.isWalkableAt(t,e-s))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+s,t,e))return[t,e]}else if(o!==0){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+s)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+s)&&!i.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+s,t,e)};we.prototype._findNeighbors=function(t){var e=t.parent,n=t.x,r=t.y,i=this.grid,o,s,a,c,l=[],u,f,d,p;if(e)o=e.x,s=e.y,a=(n-o)/Math.max(Math.abs(n-o),1),c=(r-s)/Math.max(Math.abs(r-s),1),a!==0&&c!==0?(i.isWalkableAt(n,r+c)&&l.push([n,r+c]),i.isWalkableAt(n+a,r)&&l.push([n+a,r]),i.isWalkableAt(n+a,r+c)&&l.push([n+a,r+c]),i.isWalkableAt(n-a,r)||l.push([n-a,r+c]),i.isWalkableAt(n,r-c)||l.push([n+a,r-c])):a===0?(i.isWalkableAt(n,r+c)&&l.push([n,r+c]),i.isWalkableAt(n+1,r)||l.push([n+1,r+c]),i.isWalkableAt(n-1,r)||l.push([n-1,r+c])):(i.isWalkableAt(n+a,r)&&l.push([n+a,r]),i.isWalkableAt(n,r+1)||l.push([n+a,r+1]),i.isWalkableAt(n,r-1)||l.push([n+a,r-1]));else for(u=i.getNeighbors(t,xd.Always),d=0,p=u.length;d<p;++d)f=u[d],l.push([f.x,f.y]);return l};var bd=we,Ss=Tn,_d=ht;function xe(t){Ss.call(this,t)}xe.prototype=new Ss;xe.prototype.constructor=xe;xe.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,s=e-r;if(!i.isWalkableAt(t,e))return null;if(this.trackJumpRecursion===!0&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(o!==0&&s!==0){if(this._jump(t+o,e,t,e)||this._jump(t,e+s,t,e))return[t,e]}else if(o!==0){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else if(s!==0&&(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-s)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-s)))return[t,e];return i.isWalkableAt(t+o,e)&&i.isWalkableAt(t,e+s)?this._jump(t+o,e+s,t,e):null};xe.prototype._findNeighbors=function(t){var e=t.parent,n=t.x,r=t.y,i=this.grid,o,s,a,c,l=[],u,f,d,p;if(e)if(o=e.x,s=e.y,a=(n-o)/Math.max(Math.abs(n-o),1),c=(r-s)/Math.max(Math.abs(r-s),1),a!==0&&c!==0)i.isWalkableAt(n,r+c)&&l.push([n,r+c]),i.isWalkableAt(n+a,r)&&l.push([n+a,r]),i.isWalkableAt(n,r+c)&&i.isWalkableAt(n+a,r)&&l.push([n+a,r+c]);else{var x;if(a!==0){x=i.isWalkableAt(n+a,r);var m=i.isWalkableAt(n,r+1),g=i.isWalkableAt(n,r-1);x&&(l.push([n+a,r]),m&&l.push([n+a,r+1]),g&&l.push([n+a,r-1])),m&&l.push([n,r+1]),g&&l.push([n,r-1])}else if(c!==0){x=i.isWalkableAt(n,r+c);var h=i.isWalkableAt(n+1,r),v=i.isWalkableAt(n-1,r);x&&(l.push([n,r+c]),h&&l.push([n+1,r+c]),v&&l.push([n-1,r+c])),h&&l.push([n+1,r]),v&&l.push([n-1,r])}}else for(u=i.getNeighbors(t,_d.OnlyWhenNoObstacles),d=0,p=u.length;d<p;++d)f=u[d],l.push([f.x,f.y]);return l};var Sd=xe,Ns=Tn,Nd=ht;function be(t){Ns.call(this,t)}be.prototype=new Ns;be.prototype.constructor=be;be.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,s=e-r;if(!i.isWalkableAt(t,e))return null;if(this.trackJumpRecursion===!0&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(o!==0&&s!==0){if(i.isWalkableAt(t-o,e+s)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-s)&&!i.isWalkableAt(t,e-s))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+s,t,e))return[t,e]}else if(o!==0){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+s)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+s)&&!i.isWalkableAt(t-1,e))return[t,e];return i.isWalkableAt(t+o,e)||i.isWalkableAt(t,e+s)?this._jump(t+o,e+s,t,e):null};be.prototype._findNeighbors=function(t){var e=t.parent,n=t.x,r=t.y,i=this.grid,o,s,a,c,l=[],u,f,d,p;if(e)o=e.x,s=e.y,a=(n-o)/Math.max(Math.abs(n-o),1),c=(r-s)/Math.max(Math.abs(r-s),1),a!==0&&c!==0?(i.isWalkableAt(n,r+c)&&l.push([n,r+c]),i.isWalkableAt(n+a,r)&&l.push([n+a,r]),(i.isWalkableAt(n,r+c)||i.isWalkableAt(n+a,r))&&l.push([n+a,r+c]),!i.isWalkableAt(n-a,r)&&i.isWalkableAt(n,r+c)&&l.push([n-a,r+c]),!i.isWalkableAt(n,r-c)&&i.isWalkableAt(n+a,r)&&l.push([n+a,r-c])):a===0?i.isWalkableAt(n,r+c)&&(l.push([n,r+c]),i.isWalkableAt(n+1,r)||l.push([n+1,r+c]),i.isWalkableAt(n-1,r)||l.push([n-1,r+c])):i.isWalkableAt(n+a,r)&&(l.push([n+a,r]),i.isWalkableAt(n,r+1)||l.push([n+a,r+1]),i.isWalkableAt(n,r-1)||l.push([n+a,r-1]));else for(u=i.getNeighbors(t,Nd.IfAtMostOneObstacle),d=0,p=u.length;d<p;++d)f=u[d],l.push([f.x,f.y]);return l};var Ed=be,Jn=ht,Ad=wd,Md=bd,kd=Sd,$d=Ed;function Cd(t){return t=t||{},t.diagonalMovement===Jn.Never?new Ad(t):t.diagonalMovement===Jn.Always?new Md(t):t.diagonalMovement===Jn.OnlyWhenNoObstacles?new kd(t):new $d(t)}var Id=Cd,Td={Heap:In,Node:Pr,Grid:ed,Util:ct,DiagonalMovement:ht,Heuristic:Ve,AStarFinder:Rr,BestFirstFinder:ld,BreadthFirstFinder:fd,DijkstraFinder:hd,BiAStarFinder:zr,BiBestFirstFinder:dd,BiBreadthFirstFinder:pd,BiDijkstraFinder:gd,IDAStarFinder:md,JumpPointFinder:Id},de=Td,gr=function(e,n){switch(n){case"top":return{x:e.x,y:e.y-1};case"bottom":return{x:e.x,y:e.y+1};case"left":return{x:e.x-1,y:e.y};case"right":return{x:e.x+1,y:e.y}}},zi=function(e,n,r){for(var i=e.getNodeAt(n.x,n.y);!i.walkable;){e.setWalkableAt(i.x,i.y,!0);var o=gr(i,r);i=e.getNodeAt(o.x,o.y)}},rn=function(e,n,r,i){var o=e.x/i,s=e.y/i,a=n/i,c=r/i;if(a<1)for(;a!==1;)a++,o++;else if(a>1)for(;a!==1;)a--,o--;if(c<1)for(;c!==1;)c++,s++;else if(c>1)for(;c!==1;)c--,s--;return{x:o,y:s}},Wi=function(e,n,r,i){var o=e.x*i,s=e.y*i,a=n,c=r;if(a<i)for(;a!==i;)a=a+i,o=o-i;else if(a>i)for(;a!==i;)a=a-i,o=o+i;if(c<i)for(;c!==i;)c=c+i,s=s-i;else if(c>i)for(;c!==i;)c=c-i,s=s+i;return{x:o,y:s}},on=function(e,n){return n===void 0&&(n=10),Math.round(e/n)*n},ae=function(e,n){return n===void 0&&(n=10),Math.floor(e/n)*n},Ft=function(e,n){return n===void 0&&(n=10),Math.ceil(e/n)*n},Bi=function(e,n){n===void 0&&(n=0);var r=Math.max(Math.round(e),n);return r=Number.isInteger(r)?r:n,r=r>=n?r:n,r},Dd=function(e,n,r,i,o){o===void 0&&(o=2);var s=e.xMin,a=e.yMin,c=e.width,l=e.height,u=Ft(c,o)/o+1,f=Ft(l,o)/o+1,d=new de.Grid(u,f);n.forEach(function(b){for(var w=rn(b.topLeft,s,a,o),_=rn(b.bottomRight,s,a,o),E=w.x;E<_.x;E++)for(var A=w.y;A<_.y;A++)d.setWalkableAt(E,A,!1)});var p=rn({x:on(r.x,o),y:on(r.y,o)},s,a,o),x=rn({x:on(i.x,o),y:on(i.y,o)},s,a,o),m=d.getNodeAt(p.x,p.y);zi(d,m,r.position);var g=d.getNodeAt(x.x,x.y);zi(d,g,i.position);var h=gr(m,r.position),v=gr(g,i.position);return{grid:d,start:h,end:v}},Pd=function(e,n,r){var i=[[e.x,e.y]].concat(r,[[n.x,n.y]]);return Fd(i)},Fd=function(e){for(var n=0,r=1,i=e[0],o=e[0],s="M"+o[n]+","+o[r]+"M",a=0;a<e.length;a++){var c=e[a],l=Rd(i[n],i[r],c[n],c[r]);s+=" "+l[n]+","+l[r],s+="Q"+c[n]+","+c[r],i=c}var u=e[e.length-1];return s+=" "+u[0]+","+u[1],s},Rd=function(e,n,r,i){var o=(e-r)/2+r,s=(n-i)/2+i;return[o,s]},zd=function(e,n,r){try{var i=new de.AStarFinder({diagonalMovement:de.DiagonalMovement.Always}),o=i.findPath(n.x,n.y,r.x,r.y,e),s=de.Util.smoothenPath(e,o);return o.length===0||s.length===0?null:{fullPath:o,smoothedPath:s}}catch{return null}},Vd=function(e,n,r){try{var i=new de.JumpPointFinder({diagonalMovement:de.DiagonalMovement.Never}),o=i.findPath(n.x,n.y,r.x,r.y,e),s=o;return o.length===0||s.length===0?null:{fullPath:o,smoothedPath:s}}catch{return null}},Wd=function(e,n,r){n===void 0&&(n=2),r===void 0&&(r=2);var i=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,c=e.map(function(h){var v,b,w=Math.max(h.width||0,1),_=Math.max(h.height||0,1),E={x:((v=h.positionAbsolute)==null?void 0:v.x)||0,y:((b=h.positionAbsolute)==null?void 0:b.y)||0},A={x:E.x-n,y:E.y-n},k={x:E.x-n,y:E.y+_+n},C={x:E.x+w+n,y:E.y-n},z={x:E.x+w+n,y:E.y+_+n};return r>0&&(A.x=ae(A.x,r),A.y=ae(A.y,r),k.x=ae(k.x,r),k.y=Ft(k.y,r),C.x=Ft(C.x,r),C.y=ae(C.y,r),z.x=Ft(z.x,r),z.y=Ft(z.y,r)),A.y<a&&(a=A.y),A.x<s&&(s=A.x),z.y>o&&(o=z.y),z.x>i&&(i=z.x),{id:h.id,width:w,height:_,topLeft:A,bottomLeft:k,topRight:C,bottomRight:z}}),l=n*2;i=Ft(i+l,r),o=Ft(o+l,r),s=ae(s-l,r),a=ae(a-l,r);var u={x:s,y:a},f={x:s,y:o},d={x:i,y:a},p={x:i,y:o},x=Math.abs(u.x-d.x),m=Math.abs(u.y-f.y),g={topLeft:u,bottomLeft:f,topRight:d,bottomRight:p,width:x,height:m,xMax:i,yMax:o,xMin:s,yMin:a};return{nodeBoxes:c,graphBox:g}},Yd=function(e){var n=e.options,r=n===void 0?{}:n,i=e.nodes,o=i===void 0?[]:i,s=e.sourceX,a=e.sourceY,c=e.targetX,l=e.targetY,u=e.sourcePosition,f=e.targetPosition;try{var d=r.drawEdge,p=d===void 0?Pd:d,x=r.generatePath,m=x===void 0?zd:x,g=r.gridRatio,h=g===void 0?10:g,v=r.nodePadding,b=v===void 0?10:v;h=Bi(h),b=Bi(b);var w=Wd(o,b,h),_=w.graphBox,E=w.nodeBoxes,A={x:s,y:a,position:u},k={x:c,y:l,position:f},C=Dd(_,E,A,k,h),z=C.grid,W=C.start,H=C.end,F=m(z,W,H);if(F===null)return null;var y=F.fullPath,M=F.smoothedPath,N=M.map(function(X){var q=X[0],U=X[1],Z=Wi({x:q,y:U},_.xMin,_.yMin,h);return[Z.x,Z.y]}),D=p(A,k,N),P=Math.floor(y.length/2),S=y[P],T=S[0],I=S[1],B=Wi({x:T,y:I},_.xMin,_.yMin,h),L=B.x,O=B.y;return{svgPathString:D,edgeCenterX:L,edgeCenterY:O}}catch{return null}};export{wn as H,V as P,as as R,Cn as S,Hd as a,qo as b,Od as c,Ld as d,Kh as e,Yd as g,Vd as p,j as u};
